<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Lab · Scientific Programming in Julia</title><script data-outdated-warner src="../../assets/warner.js"></script><link rel="canonical" href="https://JuliaTeachingCTU.github.io/Scientific-Programming-in-Julia/lecture_04/lab/"/><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><link href="../../assets/favicon.ico" rel="icon" type="image/x-icon"/><link href="../../assets/onlinestats.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img class="docs-light-only" src="../../assets/logo.svg" alt="Scientific Programming in Julia logo"/><img class="docs-dark-only" src="../../assets/logo-dark.svg" alt="Scientific Programming in Julia logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">Scientific Programming in Julia</a></span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><a class="tocitem" href="../../installation/">Installation</a></li><li><a class="tocitem" href="../../projects/">Projects</a></li><li><input class="collapse-toggle" id="menuitem-4" type="checkbox"/><label class="tocitem" for="menuitem-4"><span class="docs-label">1: Introduction</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../lecture_01/motivation/">Motivation</a></li><li><a class="tocitem" href="../../lecture_01/basics/">Basics</a></li><li><a class="tocitem" href="../../lecture_01/demo/">Examples</a></li><li><a class="tocitem" href="../../lecture_01/outline/">Outline</a></li><li><a class="tocitem" href="../../lecture_01/lab/">Lab</a></li><li><a class="tocitem" href="../../lecture_01/hw/">Homework</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-5" type="checkbox"/><label class="tocitem" for="menuitem-5"><span class="docs-label">2: The power of Type System &amp; multiple dispatch</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../lecture_02/lecture/">Lecture</a></li><li><a class="tocitem" href="../../lecture_02/lab/">Lab</a></li><li><a class="tocitem" href="../../lecture_02/hw/">Homework</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-6" type="checkbox"/><label class="tocitem" for="menuitem-6"><span class="docs-label">3: Design Patterns</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../lecture_03/lecture/">Lecture</a></li><li><a class="tocitem" href="../../lecture_03/lab/">Lab</a></li><li><a class="tocitem" href="../../lecture_03/hw/">Homework</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-7" type="checkbox" checked/><label class="tocitem" for="menuitem-7"><span class="docs-label">4: Package development, Unit test &amp; CI</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../lecture/">Lecture</a></li><li class="is-active"><a class="tocitem" href>Lab</a><ul class="internal"><li><a class="tocitem" href="#Warmup-Stepping-through-time"><span>Warmup - Stepping through time</span></a></li><li><a class="tocitem" href="#Package:-Ecosystem.jl"><span>Package: <code>Ecosystem.jl</code></span></a></li></ul></li><li><a class="tocitem" href="../hw/">Homework</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">4: Package development, Unit test &amp; CI</a></li><li class="is-active"><a href>Lab</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Lab</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/JuliaTeachingCTU/Scientific-Programming-in-Julia/blob/2022W/docs/src/lecture_04/lab.md#" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Lab-04:-Packaging"><a class="docs-heading-anchor" href="#Lab-04:-Packaging">Lab 04: Packaging</a><a id="Lab-04:-Packaging-1"></a><a class="docs-heading-anchor-permalink" href="#Lab-04:-Packaging" title="Permalink"></a></h1><h2 id="Warmup-Stepping-through-time"><a class="docs-heading-anchor" href="#Warmup-Stepping-through-time">Warmup - Stepping through time</a><a id="Warmup-Stepping-through-time-1"></a><a class="docs-heading-anchor-permalink" href="#Warmup-Stepping-through-time" title="Permalink"></a></h2><p>We now have all necessary functions in place to make agents perform one step of our simulation.  At the beginning of each step an animal looses energy. Afterwards it tries to find some food, which it will subsequently eat. If the animal then has less than zero energy it dies and is removed from the world. If it has positive energy it will try to reproduce.</p><p>Plants have a simpler life. They simply grow if they have not reached their maximal size.</p><div class="admonition is-category-exercise">
<header class="admonition-header">Exercise:</header>
<div class="admonition-body"><ol><li>Implement a method <code>agent_step!(::Animal,::World)</code> which performs the following steps:<ul><li>Decrement <span>$E$</span> of agent by <code>1.0</code>.</li><li>With <span>$p_f$</span>, try to find some food and eat it.</li><li>If <span>$E&lt;0$</span>, the animal dies.</li><li>With <span>$p_r$</span>, try to reproduce.</li></ul></li><li>Implement a method <code>agent_step!(::Plant,::World)</code> which performs the following steps:<ul><li>If the size of the plant is smaller than <code>max_size</code>, increment the plant&#39;s size by one.</li></ul></li></ol></div></div>
<details class = "solution-body">
<summary class = "solution-header">Solution:</summary><p><pre><code class="language-julia hljs">function agent_step!(p::Plant, w::World)
    if p.size &lt; p.max_size
        p.size += 1
    end
end

function agent_step!(a::Animal, w::World)
    a.energy -= 1
    if rand() &lt;= a.foodprob
        dinner = find_food(a,w)
        eat!(a, dinner, w)
    end
    if a.energy &lt; 0
        kill_agent!(a,w)
        return
    end
    if rand() &lt;= a.reprprob
        reproduce!(a,w)
    end
end</code></pre></p></details><p>An <code>agent_step!</code> of a sheep in a world with a single grass should make it consume the grass, let it reproduce, and eventually die if there is no more food and its energy is at zero:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; sheep = Sheep(1,2.0,2.0,1.0,1.0,male);</code><code class="nohighlight hljs ansi" style="display:block;"></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; grass = Grass(2,2,2);</code><code class="nohighlight hljs ansi" style="display:block;"></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; world = World([sheep, grass])</code><code class="nohighlight hljs ansi" style="display:block;">Main.World{Main.Agent}
  🌿  #2 100% grown
  🐑♂ #1 E=2.0 ΔE=2.0 pr=1.0 pf=1.0</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; agent_step!(sheep, world); world</code><code class="nohighlight hljs ansi" style="display:block;">Main.World{Main.Agent}
  🌿  #2 0% grown
  🐑♂ #1 E=5.0 ΔE=2.0 pr=1.0 pf=1.0</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; # NOTE: The second agent step leads to an error.
       # Can you figure out what is the problem here?
       agent_step!(sheep, world); world</code><code class="nohighlight hljs ansi" style="display:block;">ERROR: MethodError: no method matching eat!(::Main.Animal{🐑}, ::Nothing, ::Main.World{Main.Agent})
Closest candidates are:
  eat!(::Main.Animal{🐑}, <span class="sgr91">::Main.Plant{🌿}</span>, ::Main.World) at ~/work/Scientific-Programming-in-Julia/Scientific-Programming-in-Julia/docs/src/lecture_03/Lab03Ecosystem.jl:106
  eat!(<span class="sgr91">::Main.Animal{🐺}</span>, <span class="sgr91">::Main.Animal{🐑}</span>, ::Main.World) at ~/work/Scientific-Programming-in-Julia/Scientific-Programming-in-Julia/docs/src/lecture_03/Lab03Ecosystem.jl:110</code></pre><div class="admonition is-category-exercise">
<header class="admonition-header">Exercise:</header>
<div class="admonition-body"><p>Finally, lets implement a function <code>world_step!</code> which performs one <code>agent_step!</code> for each agent.  Note that simply iterating over all agents could lead to problems because we are mutating the agent dictionary.  One solution for this is to iterate over a copy of all agent IDs that are present when starting to iterate over agents.  Additionally, it could happen that an agent is killed by another one before we apply <code>agent_step!</code> to it. To solve this you can check if a given ID is currently present in the <code>World</code>.</p></div></div>
<details class = "solution-body">
<summary class = "solution-header">Solution:</summary><p><pre><code class="language-julia hljs"># make it possible to eat nothing
eat!(::Animal, ::Nothing, ::World) = nothing

function world_step!(world::World)
    # make sure that we only iterate over IDs that already exist in the
    # current timestep this lets us safely add agents
    ids = copy(keys(world.agents))

    for id in ids
        # agents can be killed by other agents, so make sure that we are
        # not stepping dead agents forward
        !haskey(world.agents,id) &amp;&amp; continue

        a = world.agents[id]
        agent_step!(a,world)
    end
end</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">world_step! (generic function with 1 method)</code></pre></p></details><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; w = World([Sheep(1), Sheep(2), Wolf(3)])</code><code class="nohighlight hljs ansi" style="display:block;">Main.World{Main.Animal}
  🐑♂ #2 E=4.0 ΔE=0.2 pr=0.8 pf=0.6
  🐺♀ #3 E=10.0 ΔE=8.0 pr=0.1 pf=0.2
  🐑♂ #1 E=4.0 ΔE=0.2 pr=0.8 pf=0.6</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; world_step!(w); w</code><code class="nohighlight hljs ansi" style="display:block;">Main.World{Main.Animal}
  🐑♂ #2 E=3.0 ΔE=0.2 pr=0.8 pf=0.6
  🐺♀ #3 E=9.0 ΔE=8.0 pr=0.1 pf=0.2
  🐑♂ #1 E=3.0 ΔE=0.2 pr=0.8 pf=0.6</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; world_step!(w); w</code><code class="nohighlight hljs ansi" style="display:block;">Main.World{Main.Animal}
  🐑♂ #2 E=2.0 ΔE=0.2 pr=0.8 pf=0.6
  🐺♀ #3 E=8.0 ΔE=8.0 pr=0.1 pf=0.2
  🐑♂ #1 E=2.0 ΔE=0.2 pr=0.8 pf=0.6</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; world_step!(w); w</code><code class="nohighlight hljs ansi" style="display:block;">Main.World{Main.Animal}
  🐑♂ #2 E=1.0 ΔE=0.2 pr=0.8 pf=0.6
  🐺♀ #3 E=23.0 ΔE=8.0 pr=0.1 pf=0.2</code></pre><p>Finally, lets run a few simulation steps and plot the solution</p><pre><code class="language-julia hljs">n_grass  = 1_000
n_sheep  = 40
n_wolves = 4

gs = [Grass(id) for id in 1:n_grass]
ss = [Sheep(id) for id in (n_grass+1):(n_grass+n_sheep)]
ws = [Wolf(id) for id in (n_grass+n_sheep+1):(n_grass+n_sheep+n_wolves)]
w  = World(vcat(gs,ss,ws))

counts = Dict(n=&gt;[c] for (n,c) in agent_count(w))
for _ in 1:100
    world_step!(w)
    for (n,c) in agent_count(w)
        push!(counts[n],c)
    end
end

using Plots
plt = plot()
tolabel(::Type{Animal{Sheep}}) = &quot;Sheep&quot;
tolabel(::Type{Animal{Wolf}}) = &quot;Wolf&quot;
tolabel(::Type{Plant{Grass}}) = &quot;Grass&quot;
for (A,c) in counts
    plot!(plt, c, label=tolabel(A), lw=2)
end
plt</code></pre><?xml version="1.0" encoding="utf-8"?>
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="600" height="400" viewBox="0 0 2400 1600">
<defs>
  <clipPath id="clip320">
    <rect x="0" y="0" width="2400" height="1600"/>
  </clipPath>
</defs>
<path clip-path="url(#clip320)" d="
M0 1600 L2400 1600 L2400 0 L0 0  Z
  " fill="#ffffff" fill-rule="evenodd" fill-opacity="1"/>
<defs>
  <clipPath id="clip321">
    <rect x="480" y="0" width="1681" height="1600"/>
  </clipPath>
</defs>
<path clip-path="url(#clip320)" d="
M172.015 1486.45 L2352.76 1486.45 L2352.76 47.2441 L172.015 47.2441  Z
  " fill="#ffffff" fill-rule="evenodd" fill-opacity="1"/>
<defs>
  <clipPath id="clip322">
    <rect x="172" y="47" width="2182" height="1440"/>
  </clipPath>
</defs>
<polyline clip-path="url(#clip322)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  213.161,1486.45 213.161,47.2441 
  "/>
<polyline clip-path="url(#clip322)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  727.487,1486.45 727.487,47.2441 
  "/>
<polyline clip-path="url(#clip322)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  1241.81,1486.45 1241.81,47.2441 
  "/>
<polyline clip-path="url(#clip322)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  1756.14,1486.45 1756.14,47.2441 
  "/>
<polyline clip-path="url(#clip322)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  2270.46,1486.45 2270.46,47.2441 
  "/>
<polyline clip-path="url(#clip320)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  172.015,1486.45 2352.76,1486.45 
  "/>
<polyline clip-path="url(#clip320)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  213.161,1486.45 213.161,1467.55 
  "/>
<polyline clip-path="url(#clip320)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  727.487,1486.45 727.487,1467.55 
  "/>
<polyline clip-path="url(#clip320)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  1241.81,1486.45 1241.81,1467.55 
  "/>
<polyline clip-path="url(#clip320)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  1756.14,1486.45 1756.14,1467.55 
  "/>
<polyline clip-path="url(#clip320)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  2270.46,1486.45 2270.46,1467.55 
  "/>
<path clip-path="url(#clip320)" d="M213.161 1517.37 Q209.55 1517.37 207.721 1520.93 Q205.916 1524.47 205.916 1531.6 Q205.916 1538.71 207.721 1542.27 Q209.55 1545.82 213.161 1545.82 Q216.795 1545.82 218.601 1542.27 Q220.429 1538.71 220.429 1531.6 Q220.429 1524.47 218.601 1520.93 Q216.795 1517.37 213.161 1517.37 M213.161 1513.66 Q218.971 1513.66 222.027 1518.27 Q225.105 1522.85 225.105 1531.6 Q225.105 1540.33 222.027 1544.94 Q218.971 1549.52 213.161 1549.52 Q207.351 1549.52 204.272 1544.94 Q201.216 1540.33 201.216 1531.6 Q201.216 1522.85 204.272 1518.27 Q207.351 1513.66 213.161 1513.66 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip320)" d="M706.758 1544.91 L723.077 1544.91 L723.077 1548.85 L701.133 1548.85 L701.133 1544.91 Q703.795 1542.16 708.378 1537.53 Q712.984 1532.88 714.165 1531.53 Q716.41 1529.01 717.29 1527.27 Q718.193 1525.51 718.193 1523.82 Q718.193 1521.07 716.248 1519.33 Q714.327 1517.6 711.225 1517.6 Q709.026 1517.6 706.572 1518.36 Q704.142 1519.13 701.364 1520.68 L701.364 1515.95 Q704.188 1514.82 706.642 1514.24 Q709.095 1513.66 711.133 1513.66 Q716.503 1513.66 719.697 1516.35 Q722.892 1519.03 722.892 1523.52 Q722.892 1525.65 722.082 1527.57 Q721.295 1529.47 719.188 1532.07 Q718.609 1532.74 715.508 1535.95 Q712.406 1539.15 706.758 1544.91 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip320)" d="M732.938 1514.29 L751.294 1514.29 L751.294 1518.22 L737.22 1518.22 L737.22 1526.7 Q738.239 1526.35 739.257 1526.19 Q740.276 1526 741.294 1526 Q747.081 1526 750.461 1529.17 Q753.841 1532.34 753.841 1537.76 Q753.841 1543.34 750.368 1546.44 Q746.896 1549.52 740.577 1549.52 Q738.401 1549.52 736.132 1549.15 Q733.887 1548.78 731.48 1548.04 L731.48 1543.34 Q733.563 1544.47 735.785 1545.03 Q738.007 1545.58 740.484 1545.58 Q744.489 1545.58 746.827 1543.48 Q749.165 1541.37 749.165 1537.76 Q749.165 1534.15 746.827 1532.04 Q744.489 1529.94 740.484 1529.94 Q738.609 1529.94 736.734 1530.35 Q734.882 1530.77 732.938 1531.65 L732.938 1514.29 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip320)" d="M1216.51 1514.29 L1234.87 1514.29 L1234.87 1518.22 L1220.79 1518.22 L1220.79 1526.7 Q1221.81 1526.35 1222.83 1526.19 Q1223.85 1526 1224.87 1526 Q1230.65 1526 1234.03 1529.17 Q1237.41 1532.34 1237.41 1537.76 Q1237.41 1543.34 1233.94 1546.44 Q1230.47 1549.52 1224.15 1549.52 Q1221.97 1549.52 1219.71 1549.15 Q1217.46 1548.78 1215.05 1548.04 L1215.05 1543.34 Q1217.14 1544.47 1219.36 1545.03 Q1221.58 1545.58 1224.06 1545.58 Q1228.06 1545.58 1230.4 1543.48 Q1232.74 1541.37 1232.74 1537.76 Q1232.74 1534.15 1230.4 1532.04 Q1228.06 1529.94 1224.06 1529.94 Q1222.18 1529.94 1220.31 1530.35 Q1218.46 1530.77 1216.51 1531.65 L1216.51 1514.29 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip320)" d="M1256.63 1517.37 Q1253.02 1517.37 1251.19 1520.93 Q1249.38 1524.47 1249.38 1531.6 Q1249.38 1538.71 1251.19 1542.27 Q1253.02 1545.82 1256.63 1545.82 Q1260.26 1545.82 1262.07 1542.27 Q1263.9 1538.71 1263.9 1531.6 Q1263.9 1524.47 1262.07 1520.93 Q1260.26 1517.37 1256.63 1517.37 M1256.63 1513.66 Q1262.44 1513.66 1265.49 1518.27 Q1268.57 1522.85 1268.57 1531.6 Q1268.57 1540.33 1265.49 1544.94 Q1262.44 1549.52 1256.63 1549.52 Q1250.82 1549.52 1247.74 1544.94 Q1244.68 1540.33 1244.68 1531.6 Q1244.68 1522.85 1247.74 1518.27 Q1250.82 1513.66 1256.63 1513.66 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip320)" d="M1729.99 1514.29 L1752.21 1514.29 L1752.21 1516.28 L1739.67 1548.85 L1734.78 1548.85 L1746.59 1518.22 L1729.99 1518.22 L1729.99 1514.29 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip320)" d="M1761.38 1514.29 L1779.74 1514.29 L1779.74 1518.22 L1765.66 1518.22 L1765.66 1526.7 Q1766.68 1526.35 1767.7 1526.19 Q1768.72 1526 1769.74 1526 Q1775.52 1526 1778.9 1529.17 Q1782.28 1532.34 1782.28 1537.76 Q1782.28 1543.34 1778.81 1546.44 Q1775.34 1549.52 1769.02 1549.52 Q1766.84 1549.52 1764.58 1549.15 Q1762.33 1548.78 1759.92 1548.04 L1759.92 1543.34 Q1762.01 1544.47 1764.23 1545.03 Q1766.45 1545.58 1768.93 1545.58 Q1772.93 1545.58 1775.27 1543.48 Q1777.61 1541.37 1777.61 1537.76 Q1777.61 1534.15 1775.27 1532.04 Q1772.93 1529.94 1768.93 1529.94 Q1767.05 1529.94 1765.18 1530.35 Q1763.33 1530.77 1761.38 1531.65 L1761.38 1514.29 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip320)" d="M2230.07 1544.91 L2237.71 1544.91 L2237.71 1518.55 L2229.4 1520.21 L2229.4 1515.95 L2237.66 1514.29 L2242.34 1514.29 L2242.34 1544.91 L2249.98 1544.91 L2249.98 1548.85 L2230.07 1548.85 L2230.07 1544.91 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip320)" d="M2269.42 1517.37 Q2265.81 1517.37 2263.98 1520.93 Q2262.18 1524.47 2262.18 1531.6 Q2262.18 1538.71 2263.98 1542.27 Q2265.81 1545.82 2269.42 1545.82 Q2273.06 1545.82 2274.86 1542.27 Q2276.69 1538.71 2276.69 1531.6 Q2276.69 1524.47 2274.86 1520.93 Q2273.06 1517.37 2269.42 1517.37 M2269.42 1513.66 Q2275.23 1513.66 2278.29 1518.27 Q2281.37 1522.85 2281.37 1531.6 Q2281.37 1540.33 2278.29 1544.94 Q2275.23 1549.52 2269.42 1549.52 Q2263.61 1549.52 2260.53 1544.94 Q2257.48 1540.33 2257.48 1531.6 Q2257.48 1522.85 2260.53 1518.27 Q2263.61 1513.66 2269.42 1513.66 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip320)" d="M2299.58 1517.37 Q2295.97 1517.37 2294.14 1520.93 Q2292.34 1524.47 2292.34 1531.6 Q2292.34 1538.71 2294.14 1542.27 Q2295.97 1545.82 2299.58 1545.82 Q2303.22 1545.82 2305.02 1542.27 Q2306.85 1538.71 2306.85 1531.6 Q2306.85 1524.47 2305.02 1520.93 Q2303.22 1517.37 2299.58 1517.37 M2299.58 1513.66 Q2305.39 1513.66 2308.45 1518.27 Q2311.53 1522.85 2311.53 1531.6 Q2311.53 1540.33 2308.45 1544.94 Q2305.39 1549.52 2299.58 1549.52 Q2293.77 1549.52 2290.7 1544.94 Q2287.64 1540.33 2287.64 1531.6 Q2287.64 1522.85 2290.7 1518.27 Q2293.77 1513.66 2299.58 1513.66 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><polyline clip-path="url(#clip322)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  172.015,1453.22 2352.76,1453.22 
  "/>
<polyline clip-path="url(#clip322)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  172.015,1078.05 2352.76,1078.05 
  "/>
<polyline clip-path="url(#clip322)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  172.015,702.88 2352.76,702.88 
  "/>
<polyline clip-path="url(#clip322)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  172.015,327.71 2352.76,327.71 
  "/>
<polyline clip-path="url(#clip320)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  172.015,1486.45 172.015,47.2441 
  "/>
<polyline clip-path="url(#clip320)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  172.015,1453.22 190.912,1453.22 
  "/>
<polyline clip-path="url(#clip320)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  172.015,1078.05 190.912,1078.05 
  "/>
<polyline clip-path="url(#clip320)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  172.015,702.88 190.912,702.88 
  "/>
<polyline clip-path="url(#clip320)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  172.015,327.71 190.912,327.71 
  "/>
<path clip-path="url(#clip320)" d="M124.07 1439.02 Q120.459 1439.02 118.631 1442.58 Q116.825 1446.12 116.825 1453.25 Q116.825 1460.36 118.631 1463.93 Q120.459 1467.47 124.07 1467.47 Q127.705 1467.47 129.51 1463.93 Q131.339 1460.36 131.339 1453.25 Q131.339 1446.12 129.51 1442.58 Q127.705 1439.02 124.07 1439.02 M124.07 1435.31 Q129.881 1435.31 132.936 1439.92 Q136.015 1444.5 136.015 1453.25 Q136.015 1461.98 132.936 1466.59 Q129.881 1471.17 124.07 1471.17 Q118.26 1471.17 115.182 1466.59 Q112.126 1461.98 112.126 1453.25 Q112.126 1444.5 115.182 1439.92 Q118.26 1435.31 124.07 1435.31 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip320)" d="M57.7745 1091.39 L74.0939 1091.39 L74.0939 1095.33 L52.1495 1095.33 L52.1495 1091.39 Q54.8115 1088.64 59.3949 1084.01 Q64.0013 1079.36 65.1819 1078.01 Q67.4272 1075.49 68.3068 1073.76 Q69.2096 1072 69.2096 1070.31 Q69.2096 1067.55 67.2652 1065.82 Q65.3439 1064.08 62.2421 1064.08 Q60.043 1064.08 57.5893 1064.84 Q55.1588 1065.61 52.381 1067.16 L52.381 1062.44 Q55.2051 1061.3 57.6588 1060.72 Q60.1124 1060.14 62.1495 1060.14 Q67.5198 1060.14 70.7142 1062.83 Q73.9087 1065.51 73.9087 1070.01 Q73.9087 1072.13 73.0985 1074.06 Q72.3115 1075.95 70.205 1078.55 Q69.6263 1079.22 66.5245 1082.44 Q63.4226 1085.63 57.7745 1091.39 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip320)" d="M93.9086 1063.85 Q90.2975 1063.85 88.4688 1067.41 Q86.6632 1070.95 86.6632 1078.08 Q86.6632 1085.19 88.4688 1088.76 Q90.2975 1092.3 93.9086 1092.3 Q97.5428 1092.3 99.3483 1088.76 Q101.177 1085.19 101.177 1078.08 Q101.177 1070.95 99.3483 1067.41 Q97.5428 1063.85 93.9086 1063.85 M93.9086 1060.14 Q99.7187 1060.14 102.774 1064.75 Q105.853 1069.33 105.853 1078.08 Q105.853 1086.81 102.774 1091.42 Q99.7187 1096 93.9086 1096 Q88.0984 1096 85.0197 1091.42 Q81.9642 1086.81 81.9642 1078.08 Q81.9642 1069.33 85.0197 1064.75 Q88.0984 1060.14 93.9086 1060.14 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip320)" d="M124.07 1063.85 Q120.459 1063.85 118.631 1067.41 Q116.825 1070.95 116.825 1078.08 Q116.825 1085.19 118.631 1088.76 Q120.459 1092.3 124.07 1092.3 Q127.705 1092.3 129.51 1088.76 Q131.339 1085.19 131.339 1078.08 Q131.339 1070.95 129.51 1067.41 Q127.705 1063.85 124.07 1063.85 M124.07 1060.14 Q129.881 1060.14 132.936 1064.75 Q136.015 1069.33 136.015 1078.08 Q136.015 1086.81 132.936 1091.42 Q129.881 1096 124.07 1096 Q118.26 1096 115.182 1091.42 Q112.126 1086.81 112.126 1078.08 Q112.126 1069.33 115.182 1064.75 Q118.26 1060.14 124.07 1060.14 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip320)" d="M66.5939 689.674 L54.7884 708.123 L66.5939 708.123 L66.5939 689.674 M65.367 685.6 L71.2466 685.6 L71.2466 708.123 L76.1772 708.123 L76.1772 712.011 L71.2466 712.011 L71.2466 720.16 L66.5939 720.16 L66.5939 712.011 L50.9921 712.011 L50.9921 707.498 L65.367 685.6 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip320)" d="M93.9086 688.678 Q90.2975 688.678 88.4688 692.243 Q86.6632 695.785 86.6632 702.914 Q86.6632 710.021 88.4688 713.585 Q90.2975 717.127 93.9086 717.127 Q97.5428 717.127 99.3483 713.585 Q101.177 710.021 101.177 702.914 Q101.177 695.785 99.3483 692.243 Q97.5428 688.678 93.9086 688.678 M93.9086 684.975 Q99.7187 684.975 102.774 689.581 Q105.853 694.164 105.853 702.914 Q105.853 711.641 102.774 716.248 Q99.7187 720.831 93.9086 720.831 Q88.0984 720.831 85.0197 716.248 Q81.9642 711.641 81.9642 702.914 Q81.9642 694.164 85.0197 689.581 Q88.0984 684.975 93.9086 684.975 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip320)" d="M124.07 688.678 Q120.459 688.678 118.631 692.243 Q116.825 695.785 116.825 702.914 Q116.825 710.021 118.631 713.585 Q120.459 717.127 124.07 717.127 Q127.705 717.127 129.51 713.585 Q131.339 710.021 131.339 702.914 Q131.339 695.785 129.51 692.243 Q127.705 688.678 124.07 688.678 M124.07 684.975 Q129.881 684.975 132.936 689.581 Q136.015 694.164 136.015 702.914 Q136.015 711.641 132.936 716.248 Q129.881 720.831 124.07 720.831 Q118.26 720.831 115.182 716.248 Q112.126 711.641 112.126 702.914 Q112.126 694.164 115.182 689.581 Q118.26 684.975 124.07 684.975 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip320)" d="M64.3254 325.846 Q61.1773 325.846 59.3254 327.999 Q57.4967 330.152 57.4967 333.902 Q57.4967 337.629 59.3254 339.805 Q61.1773 341.957 64.3254 341.957 Q67.4735 341.957 69.3022 339.805 Q71.1541 337.629 71.1541 333.902 Q71.1541 330.152 69.3022 327.999 Q67.4735 325.846 64.3254 325.846 M73.6077 311.194 L73.6077 315.453 Q71.8485 314.62 70.0429 314.18 Q68.2606 313.74 66.5013 313.74 Q61.8717 313.74 59.418 316.865 Q56.9875 319.99 56.6402 326.309 Q58.006 324.295 60.0662 323.231 Q62.1263 322.143 64.6032 322.143 Q69.8115 322.143 72.8207 325.314 Q75.8531 328.462 75.8531 333.902 Q75.8531 339.226 72.705 342.443 Q69.5568 345.661 64.3254 345.661 Q58.33 345.661 55.1588 341.078 Q51.9875 336.471 51.9875 327.744 Q51.9875 319.55 55.8764 314.689 Q59.7652 309.805 66.3161 309.805 Q68.0754 309.805 69.8578 310.152 Q71.6633 310.499 73.6077 311.194 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip320)" d="M93.9086 313.508 Q90.2975 313.508 88.4688 317.073 Q86.6632 320.615 86.6632 327.744 Q86.6632 334.851 88.4688 338.416 Q90.2975 341.957 93.9086 341.957 Q97.5428 341.957 99.3483 338.416 Q101.177 334.851 101.177 327.744 Q101.177 320.615 99.3483 317.073 Q97.5428 313.508 93.9086 313.508 M93.9086 309.805 Q99.7187 309.805 102.774 314.411 Q105.853 318.995 105.853 327.744 Q105.853 336.471 102.774 341.078 Q99.7187 345.661 93.9086 345.661 Q88.0984 345.661 85.0197 341.078 Q81.9642 336.471 81.9642 327.744 Q81.9642 318.995 85.0197 314.411 Q88.0984 309.805 93.9086 309.805 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip320)" d="M124.07 313.508 Q120.459 313.508 118.631 317.073 Q116.825 320.615 116.825 327.744 Q116.825 334.851 118.631 338.416 Q120.459 341.957 124.07 341.957 Q127.705 341.957 129.51 338.416 Q131.339 334.851 131.339 327.744 Q131.339 320.615 129.51 317.073 Q127.705 313.508 124.07 313.508 M124.07 309.805 Q129.881 309.805 132.936 314.411 Q136.015 318.995 136.015 327.744 Q136.015 336.471 132.936 341.078 Q129.881 345.661 124.07 345.661 Q118.26 345.661 115.182 341.078 Q112.126 336.471 112.126 327.744 Q112.126 318.995 115.182 314.411 Q118.26 309.805 124.07 309.805 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><polyline clip-path="url(#clip322)" style="stroke:#009af9; stroke-linecap:round; stroke-linejoin:round; stroke-width:8; stroke-opacity:1; fill:none" points="
  233.734,1378.19 254.307,1323.79 274.88,1213.11 295.453,1156.83 316.026,1151.21 336.599,1089.3 357.172,1089.3 377.745,1081.8 398.318,1093.06 418.891,1093.06 
  439.464,1070.55 460.037,1104.31 480.61,1162.46 501.183,1173.72 521.756,1175.59 542.329,1171.84 562.902,1149.33 583.475,1143.7 604.048,1166.21 624.621,1156.83 
  645.194,1188.72 665.768,1188.72 686.341,1179.35 706.914,1166.21 727.487,1164.34 748.06,1153.08 768.633,1143.7 789.206,1158.71 809.779,1149.33 830.352,1147.46 
  850.925,1136.2 871.498,1151.21 892.071,1162.46 912.644,1158.71 933.217,1158.71 953.79,1181.22 974.363,1214.99 994.936,1201.86 1015.51,1183.1 1036.08,1177.47 
  1056.66,1205.61 1077.23,1205.61 1097.8,1201.86 1118.37,1245 1138.95,1256.25 1159.52,1248.75 1180.09,1260.01 1200.67,1258.13 1221.24,1224.37 1241.81,1237.5 
  1262.39,1216.86 1282.96,1183.1 1303.53,1177.47 1324.1,1141.83 1344.68,1145.58 1365.25,1147.46 1385.82,1160.59 1406.4,1168.09 1426.97,1143.7 1447.54,1156.83 
  1468.12,1164.34 1488.69,1198.1 1509.26,1194.35 1529.83,1186.85 1550.41,1143.7 1570.98,1153.08 1591.55,1183.1 1612.13,1184.97 1632.7,1196.23 1653.27,1199.98 
  1673.85,1183.1 1694.42,1211.23 1714.99,1220.61 1735.57,1203.73 1756.14,1199.98 1776.71,1199.98 1797.28,1188.72 1817.86,1183.1 1838.43,1190.6 1859,1179.35 
  1879.58,1169.97 1900.15,1160.59 1920.72,1147.46 1941.3,1169.97 1961.87,1190.6 1982.44,1186.85 2003.01,1179.35 2023.59,1171.84 2044.16,1154.96 2064.73,1177.47 
  2085.31,1198.1 2105.88,1205.61 2126.45,1233.74 2147.03,1246.88 2167.6,1233.74 2188.17,1214.99 2208.74,1186.85 2229.32,1143.7 2249.89,1154.96 2270.46,1123.07 
  2291.04,1141.83 
  "/>
<polyline clip-path="url(#clip322)" style="stroke:#e26f46; stroke-linecap:round; stroke-linejoin:round; stroke-width:8; stroke-opacity:1; fill:none" points="
  233.734,412.123 254.307,268.433 274.88,160.759 295.453,114.426 316.026,106.922 336.599,135.248 357.172,172.389 377.745,223.037 398.318,261.305 418.891,287.754 
  439.464,327.522 460.037,334.65 480.61,331.461 501.183,331.461 521.756,318.143 542.329,311.765 562.902,300.322 583.475,297.133 604.048,293.007 624.621,267.87 
  645.194,257.365 665.768,245.36 686.341,245.548 706.914,247.423 727.487,244.985 748.06,241.983 768.633,257.178 789.206,257.741 809.779,263.931 830.352,284.753 
  850.925,283.252 871.498,278.375 892.071,277.249 912.644,267.307 933.217,277.062 953.79,257.553 974.363,248.549 994.936,224.913 1015.51,215.909 1036.08,212.908 
  1056.66,196.776 1077.23,188.709 1097.8,183.457 1118.37,150.442 1138.95,133.372 1159.52,108.798 1180.09,98.2934 1200.67,87.9763 1221.24,93.0411 1241.81,91.1652 
  1262.39,93.2287 1282.96,109.549 1303.53,126.056 1324.1,144.252 1344.68,176.892 1365.25,209.906 1385.82,221.349 1406.4,235.981 1426.97,247.048 1447.54,258.116 
  1468.12,257.553 1488.69,251.175 1509.26,237.857 1529.83,243.672 1550.41,252.301 1570.98,241.608 1591.55,243.859 1612.13,233.917 1632.7,230.728 1653.27,223.225 
  1673.85,215.159 1694.42,202.028 1714.99,185.145 1735.57,164.511 1756.14,166.012 1776.71,154.569 1797.28,166.012 1817.86,163.573 1838.43,177.079 1859,187.021 
  1879.58,202.591 1900.15,211.407 1920.72,233.167 1941.3,249.299 1961.87,228.477 1982.44,220.786 2003.01,220.411 2023.59,214.033 2044.16,215.159 2064.73,216.097 
  2085.31,226.414 2105.88,208.031 2126.45,184.395 2147.03,165.449 2167.6,155.882 2188.17,148.003 2208.74,168.825 2229.32,180.831 2249.89,198.089 2270.46,222.85 
  2291.04,245.36 
  "/>
<polyline clip-path="url(#clip322)" style="stroke:#3da44d; stroke-linecap:round; stroke-linejoin:round; stroke-width:8; stroke-opacity:1; fill:none" points="
  233.734,1445.72 254.307,1445.72 274.88,1445.72 295.453,1441.96 316.026,1438.21 336.599,1438.21 357.172,1441.96 377.745,1445.72 398.318,1441.96 418.891,1440.09 
  439.464,1438.21 460.037,1436.34 480.61,1436.34 501.183,1440.09 521.756,1440.09 542.329,1440.09 562.902,1440.09 583.475,1436.34 604.048,1434.46 624.621,1434.46 
  645.194,1432.58 665.768,1430.71 686.341,1430.71 706.914,1426.96 727.487,1428.83 748.06,1425.08 768.633,1425.08 789.206,1432.58 809.779,1432.58 830.352,1434.46 
  850.925,1436.34 871.498,1438.21 892.071,1434.46 912.644,1432.58 933.217,1426.96 953.79,1423.21 974.363,1423.21 994.936,1419.45 1015.51,1415.7 1036.08,1411.95 
  1056.66,1411.95 1077.23,1410.07 1097.8,1410.07 1118.37,1406.32 1138.95,1404.45 1159.52,1406.32 1180.09,1411.95 1200.67,1415.7 1221.24,1413.83 1241.81,1410.07 
  1262.39,1408.2 1282.96,1400.7 1303.53,1400.7 1324.1,1398.82 1344.68,1398.82 1365.25,1398.82 1385.82,1395.07 1406.4,1389.44 1426.97,1400.7 1447.54,1400.7 
  1468.12,1400.7 1488.69,1402.57 1509.26,1408.2 1529.83,1400.7 1550.41,1402.57 1570.98,1404.45 1591.55,1406.32 1612.13,1402.57 1632.7,1402.57 1653.27,1395.07 
  1673.85,1385.69 1694.42,1387.56 1714.99,1393.19 1735.57,1393.19 1756.14,1396.94 1776.71,1395.07 1797.28,1395.07 1817.86,1402.57 1838.43,1408.2 1859,1406.32 
  1879.58,1406.32 1900.15,1404.45 1920.72,1400.7 1941.3,1404.45 1961.87,1404.45 1982.44,1404.45 2003.01,1395.07 2023.59,1389.44 2044.16,1380.06 2064.73,1370.68 
  2085.31,1376.31 2105.88,1370.68 2126.45,1376.31 2147.03,1370.68 2167.6,1372.56 2188.17,1376.31 2208.74,1372.56 2229.32,1378.19 2249.89,1370.68 2270.46,1376.31 
  2291.04,1387.56 
  "/>
<path clip-path="url(#clip320)" d="
M1894.91 302.578 L2280.06 302.578 L2280.06 95.2176 L1894.91 95.2176  Z
  " fill="#ffffff" fill-rule="evenodd" fill-opacity="1"/>
<polyline clip-path="url(#clip320)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  1894.91,302.578 2280.06,302.578 2280.06,95.2176 1894.91,95.2176 1894.91,302.578 
  "/>
<polyline clip-path="url(#clip320)" style="stroke:#009af9; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  1919.14,147.058 2064.53,147.058 
  "/>
<path clip-path="url(#clip320)" d="M2111 130.912 L2111 135.472 Q2108.34 134.199 2105.98 133.574 Q2103.62 132.949 2101.42 132.949 Q2097.6 132.949 2095.52 134.43 Q2093.46 135.912 2093.46 138.643 Q2093.46 140.935 2094.82 142.115 Q2096.21 143.273 2100.05 143.99 L2102.88 144.569 Q2108.11 145.565 2110.59 148.088 Q2113.09 150.588 2113.09 154.801 Q2113.09 159.824 2109.71 162.416 Q2106.35 165.009 2099.85 165.009 Q2097.39 165.009 2094.61 164.453 Q2091.86 163.898 2088.9 162.81 L2088.9 157.995 Q2091.74 159.592 2094.47 160.402 Q2097.21 161.213 2099.85 161.213 Q2103.85 161.213 2106.03 159.639 Q2108.2 158.064 2108.2 155.148 Q2108.2 152.602 2106.63 151.166 Q2105.08 149.731 2101.51 149.014 L2098.66 148.458 Q2093.43 147.416 2091.1 145.194 Q2088.76 142.972 2088.76 139.014 Q2088.76 134.43 2091.97 131.791 Q2095.22 129.153 2100.89 129.153 Q2103.32 129.153 2105.84 129.592 Q2108.36 130.032 2111 130.912 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip320)" d="M2141.74 148.689 L2141.74 164.338 L2137.48 164.338 L2137.48 148.828 Q2137.48 145.148 2136.05 143.319 Q2134.61 141.49 2131.74 141.49 Q2128.29 141.49 2126.3 143.69 Q2124.31 145.889 2124.31 149.685 L2124.31 164.338 L2120.03 164.338 L2120.03 128.319 L2124.31 128.319 L2124.31 142.44 Q2125.84 140.102 2127.9 138.944 Q2129.98 137.787 2132.69 137.787 Q2137.16 137.787 2139.45 140.565 Q2141.74 143.319 2141.74 148.689 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip320)" d="M2172.41 150.31 L2172.41 152.393 L2152.83 152.393 Q2153.11 156.791 2155.47 159.106 Q2157.85 161.398 2162.09 161.398 Q2164.54 161.398 2166.84 160.796 Q2169.15 160.194 2171.42 158.99 L2171.42 163.018 Q2169.13 163.99 2166.72 164.5 Q2164.31 165.009 2161.84 165.009 Q2155.63 165.009 2152 161.398 Q2148.39 157.787 2148.39 151.629 Q2148.39 145.264 2151.81 141.537 Q2155.26 137.787 2161.09 137.787 Q2166.33 137.787 2169.36 141.166 Q2172.41 144.523 2172.41 150.31 M2168.15 149.06 Q2168.11 145.565 2166.19 143.481 Q2164.29 141.398 2161.14 141.398 Q2157.58 141.398 2155.42 143.412 Q2153.29 145.426 2152.97 149.083 L2168.15 149.06 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip320)" d="M2201.58 150.31 L2201.58 152.393 L2182 152.393 Q2182.28 156.791 2184.64 159.106 Q2187.02 161.398 2191.26 161.398 Q2193.71 161.398 2196 160.796 Q2198.32 160.194 2200.59 158.99 L2200.59 163.018 Q2198.29 163.99 2195.89 164.5 Q2193.48 165.009 2191 165.009 Q2184.8 165.009 2181.16 161.398 Q2177.55 157.787 2177.55 151.629 Q2177.55 145.264 2180.98 141.537 Q2184.43 137.787 2190.26 137.787 Q2195.49 137.787 2198.53 141.166 Q2201.58 144.523 2201.58 150.31 M2197.32 149.06 Q2197.28 145.565 2195.35 143.481 Q2193.46 141.398 2190.31 141.398 Q2186.74 141.398 2184.59 143.412 Q2182.46 145.426 2182.14 149.083 L2197.32 149.06 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip320)" d="M2212.69 160.449 L2212.69 174.199 L2208.41 174.199 L2208.41 138.412 L2212.69 138.412 L2212.69 142.347 Q2214.03 140.032 2216.07 138.921 Q2218.13 137.787 2220.98 137.787 Q2225.7 137.787 2228.64 141.537 Q2231.6 145.287 2231.6 151.398 Q2231.6 157.509 2228.64 161.259 Q2225.7 165.009 2220.98 165.009 Q2218.13 165.009 2216.07 163.898 Q2214.03 162.763 2212.69 160.449 M2227.18 151.398 Q2227.18 146.699 2225.24 144.037 Q2223.32 141.352 2219.94 141.352 Q2216.56 141.352 2214.61 144.037 Q2212.69 146.699 2212.69 151.398 Q2212.69 156.097 2214.61 158.782 Q2216.56 161.444 2219.94 161.444 Q2223.32 161.444 2225.24 158.782 Q2227.18 156.097 2227.18 151.398 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><polyline clip-path="url(#clip320)" style="stroke:#e26f46; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  1919.14,198.898 2064.53,198.898 
  "/>
<path clip-path="url(#clip320)" d="M2114.31 211.247 L2114.31 201.965 L2106.67 201.965 L2106.67 198.122 L2118.94 198.122 L2118.94 212.96 Q2116.23 214.881 2112.97 215.877 Q2109.71 216.849 2106 216.849 Q2097.9 216.849 2093.32 212.127 Q2088.76 207.381 2088.76 198.932 Q2088.76 190.46 2093.32 185.738 Q2097.9 180.993 2106 180.993 Q2109.38 180.993 2112.41 181.826 Q2115.47 182.659 2118.04 184.28 L2118.04 189.256 Q2115.45 187.057 2112.53 185.946 Q2109.61 184.835 2106.4 184.835 Q2100.05 184.835 2096.86 188.377 Q2093.69 191.918 2093.69 198.932 Q2093.69 205.923 2096.86 209.465 Q2100.05 213.006 2106.4 213.006 Q2108.87 213.006 2110.82 212.59 Q2112.76 212.15 2114.31 211.247 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip320)" d="M2142.32 194.233 Q2141.6 193.817 2140.75 193.631 Q2139.91 193.423 2138.9 193.423 Q2135.28 193.423 2133.34 195.784 Q2131.42 198.122 2131.42 202.52 L2131.42 216.178 L2127.14 216.178 L2127.14 190.252 L2131.42 190.252 L2131.42 194.28 Q2132.76 191.918 2134.91 190.784 Q2137.07 189.627 2140.15 189.627 Q2140.59 189.627 2141.12 189.696 Q2141.65 189.743 2142.3 189.858 L2142.32 194.233 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip320)" d="M2158.57 203.145 Q2153.41 203.145 2151.42 204.326 Q2149.43 205.506 2149.43 208.354 Q2149.43 210.622 2150.91 211.965 Q2152.41 213.284 2154.98 213.284 Q2158.53 213.284 2160.65 210.784 Q2162.81 208.261 2162.81 204.094 L2162.81 203.145 L2158.57 203.145 M2167.07 201.386 L2167.07 216.178 L2162.81 216.178 L2162.81 212.242 Q2161.35 214.603 2159.17 215.738 Q2157 216.849 2153.85 216.849 Q2149.87 216.849 2147.51 214.627 Q2145.17 212.381 2145.17 208.631 Q2145.17 204.256 2148.09 202.034 Q2151.03 199.812 2156.84 199.812 L2162.81 199.812 L2162.81 199.395 Q2162.81 196.455 2160.86 194.858 Q2158.94 193.238 2155.45 193.238 Q2153.22 193.238 2151.12 193.77 Q2149.01 194.303 2147.07 195.367 L2147.07 191.432 Q2149.4 190.53 2151.6 190.09 Q2153.8 189.627 2155.89 189.627 Q2161.51 189.627 2164.29 192.543 Q2167.07 195.46 2167.07 201.386 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip320)" d="M2192.37 191.016 L2192.37 195.043 Q2190.56 194.117 2188.62 193.655 Q2186.67 193.192 2184.59 193.192 Q2181.42 193.192 2179.82 194.164 Q2178.25 195.136 2178.25 197.08 Q2178.25 198.562 2179.38 199.418 Q2180.52 200.252 2183.94 201.016 L2185.4 201.34 Q2189.94 202.312 2191.84 204.094 Q2193.76 205.854 2193.76 209.025 Q2193.76 212.636 2190.89 214.742 Q2188.04 216.849 2183.04 216.849 Q2180.96 216.849 2178.69 216.432 Q2176.44 216.039 2173.94 215.228 L2173.94 210.83 Q2176.3 212.057 2178.59 212.682 Q2180.89 213.284 2183.13 213.284 Q2186.14 213.284 2187.76 212.266 Q2189.38 211.224 2189.38 209.349 Q2189.38 207.613 2188.2 206.687 Q2187.04 205.761 2183.09 204.904 L2181.6 204.557 Q2177.65 203.724 2175.89 202.011 Q2174.13 200.275 2174.13 197.266 Q2174.13 193.608 2176.72 191.618 Q2179.31 189.627 2184.08 189.627 Q2186.44 189.627 2188.53 189.974 Q2190.61 190.321 2192.37 191.016 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip320)" d="M2217.07 191.016 L2217.07 195.043 Q2215.26 194.117 2213.32 193.655 Q2211.37 193.192 2209.29 193.192 Q2206.12 193.192 2204.52 194.164 Q2202.95 195.136 2202.95 197.08 Q2202.95 198.562 2204.08 199.418 Q2205.21 200.252 2208.64 201.016 L2210.1 201.34 Q2214.64 202.312 2216.53 204.094 Q2218.46 205.854 2218.46 209.025 Q2218.46 212.636 2215.59 214.742 Q2212.74 216.849 2207.74 216.849 Q2205.65 216.849 2203.39 216.432 Q2201.14 216.039 2198.64 215.228 L2198.64 210.83 Q2201 212.057 2203.29 212.682 Q2205.59 213.284 2207.83 213.284 Q2210.84 213.284 2212.46 212.266 Q2214.08 211.224 2214.08 209.349 Q2214.08 207.613 2212.9 206.687 Q2211.74 205.761 2207.78 204.904 L2206.3 204.557 Q2202.34 203.724 2200.59 202.011 Q2198.83 200.275 2198.83 197.266 Q2198.83 193.608 2201.42 191.618 Q2204.01 189.627 2208.78 189.627 Q2211.14 189.627 2213.22 189.974 Q2215.31 190.321 2217.07 191.016 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><polyline clip-path="url(#clip320)" style="stroke:#3da44d; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  1919.14,250.738 2064.53,250.738 
  "/>
<path clip-path="url(#clip320)" d="M2088.76 233.458 L2093.48 233.458 L2100.75 262.67 L2107.99 233.458 L2113.25 233.458 L2120.52 262.67 L2127.76 233.458 L2132.51 233.458 L2123.83 268.018 L2117.95 268.018 L2110.66 238.018 L2103.29 268.018 L2097.41 268.018 L2088.76 233.458 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip320)" d="M2145.79 245.078 Q2142.37 245.078 2140.38 247.763 Q2138.39 250.425 2138.39 255.078 Q2138.39 259.731 2140.35 262.416 Q2142.34 265.078 2145.79 265.078 Q2149.2 265.078 2151.19 262.393 Q2153.18 259.707 2153.18 255.078 Q2153.18 250.471 2151.19 247.786 Q2149.2 245.078 2145.79 245.078 M2145.79 241.467 Q2151.35 241.467 2154.52 245.078 Q2157.69 248.689 2157.69 255.078 Q2157.69 261.444 2154.52 265.078 Q2151.35 268.689 2145.79 268.689 Q2140.22 268.689 2137.04 265.078 Q2133.9 261.444 2133.9 255.078 Q2133.9 248.689 2137.04 245.078 Q2140.22 241.467 2145.79 241.467 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip320)" d="M2164.75 231.999 L2169.01 231.999 L2169.01 268.018 L2164.75 268.018 L2164.75 231.999 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip320)" d="M2191.05 231.999 L2191.05 235.541 L2186.97 235.541 Q2184.68 235.541 2183.78 236.467 Q2182.9 237.393 2182.9 239.8 L2182.9 242.092 L2189.91 242.092 L2189.91 245.402 L2182.9 245.402 L2182.9 268.018 L2178.62 268.018 L2178.62 245.402 L2174.54 245.402 L2174.54 242.092 L2178.62 242.092 L2178.62 240.286 Q2178.62 235.958 2180.63 233.99 Q2182.65 231.999 2187.02 231.999 L2191.05 231.999 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /></svg>
<h2 id="Package:-Ecosystem.jl"><a class="docs-heading-anchor" href="#Package:-Ecosystem.jl">Package: <code>Ecosystem.jl</code></a><a id="Package:-Ecosystem.jl-1"></a><a class="docs-heading-anchor-permalink" href="#Package:-Ecosystem.jl" title="Permalink"></a></h2><p>In the main section of this lab you will create your own <code>Ecosystem.jl</code> package to organize <em>and test (!)</em> the code that we have written so far.</p><h3 id="PkgTemplates.jl"><a class="docs-heading-anchor" href="#PkgTemplates.jl"><code>PkgTemplates.jl</code></a><a id="PkgTemplates.jl-1"></a><a class="docs-heading-anchor-permalink" href="#PkgTemplates.jl" title="Permalink"></a></h3><div class="admonition is-category-exercise">
<header class="admonition-header">Exercise:</header>
<div class="admonition-body"><p>The simplest way to create a new package in Julia is to use <code>PkgTemplates.jl</code>. <code>]add PkgTemplates</code> to your global julia env and create a new package by running:</p><pre><code class="language-julia hljs">using PkgTemplates
Template(interactive=true)(&quot;Ecosystem&quot;)</code></pre><p>to interactively specify various options for your new package or use the following snippet to generate it programmatically:</p><pre><code class="language-julia hljs">using PkgTemplates

# define the package template
template = Template(;
    user = &quot;GithubUserName&quot;,            # github user name
    authors = [&quot;Author1&quot;, &quot;Author2&quot;],   # list of authors
    dir = &quot;/path/to/folder/&quot;,           # dir in which the package will be created
    julia = v&quot;1.8&quot;,                     # compat version of Julia
    plugins = [
        !CompatHelper,                  # disable CompatHelper
        !TagBot,                        # disable TagBot
        Readme(; inline_badges = true), # added readme file with badges
        Tests(; project = true),        # added Project.toml file for unit tests
        Git(; manifest = false),        # add manifest.toml to .gitignore
        License(; name = &quot;MIT&quot;)         # addedMIT licence
    ],
)

# execute the package template (this creates all files/folders)
template(&quot;Ecosystem&quot;)</code></pre></div></div>
<details class = "solution-body">
<summary class = "solution-header">Solution:</summary><p><p>This should have created a new folder <code>Ecosystem</code> which looks like below.</p><pre><code class="nohighlight hljs">.
├── LICENSE
├── Project.toml
├── README.md
├── src
│   └── Ecosystem.jl
└── test
    ├── Manifest.toml
    ├── Project.toml
    └── runtests.jl</code></pre><p>If you <code>]activate /path/to/Ecosystem</code> you should be able to run <code>]test</code> to run the autogenerated test (which is not doing anything) and get the following output:</p><pre><code class="nohighlight hljs">(Ecosystem) pkg&gt; test
     Testing Ecosystem
      Status `/private/var/folders/6h/l9_skfms2v3dt8z3zfnd2jr00000gn/T/jl_zd5Uai/Project.toml`
  [e77cd98c] Ecosystem v0.1.0 `~/repos/Ecosystem`
  [8dfed614] Test `@stdlib/Test`
      Status `/private/var/folders/6h/l9_skfms2v3dt8z3zfnd2jr00000gn/T/jl_zd5Uai/Manifest.toml`
  [e77cd98c] Ecosystem v0.1.0 `~/repos/Ecosystem`
  [2a0f44e3] Base64 `@stdlib/Base64`
  [b77e0a4c] InteractiveUtils `@stdlib/InteractiveUtils`
  [56ddb016] Logging `@stdlib/Logging`
  [d6f4376e] Markdown `@stdlib/Markdown`
  [9a3f8284] Random `@stdlib/Random`
  [ea8e919c] SHA v0.7.0 `@stdlib/SHA`
  [9e88b42a] Serialization `@stdlib/Serialization`
  [8dfed614] Test `@stdlib/Test`
     Testing Running tests...
Test Summary: |Time
Ecosystem.jl  | None  0.0s
     Testing Ecosystem tests passed </code></pre></p></details><div class="admonition is-warning"><header class="admonition-header">Warning</header><div class="admonition-body"><p>From now on make sure that you <strong>always</strong> have the <code>Ecosystem</code> enviroment enabled. Otherwise you will not end up with the correct dependencies in your packages</p></div></div><h3 id="Adding-content-to-Ecosystem.jl"><a class="docs-heading-anchor" href="#Adding-content-to-Ecosystem.jl">Adding content to <code>Ecosystem.jl</code></a><a id="Adding-content-to-Ecosystem.jl-1"></a><a class="docs-heading-anchor-permalink" href="#Adding-content-to-Ecosystem.jl" title="Permalink"></a></h3><div class="admonition is-category-exercise">
<header class="admonition-header">Exercise:</header>
<div class="admonition-body"><p>Next, let&#39;s add the types and functions we have defined so far. You can use <code>include(&quot;path/to/file.jl&quot;)</code> in the main module file at <code>src/Ecosystem.jl</code> to bring some structure in your code. An exemplary file structure could look like below.</p><pre><code class="nohighlight hljs">.
├── LICENSE
├── Manifest.toml
├── Project.toml
├── README.md
├── src
│   ├── Ecosystem.jl
│   ├── animal.jl
│   ├── plant.jl
│   └── world.jl
└── test
    └── runtests.jl</code></pre><p>While you are adding functionality to your package you can make great use of <code>Revise.jl</code>.  Loading <code>Revise.jl</code> before your <code>Ecosystem.jl</code> will automatically recompile (and invalidate old methods!) while you develop.  You can install it in your global environment and and create a <code>$HOME/.config/startup.jl</code> which always loads <code>Revise</code>. It can look like this:</p><pre><code class="language-julia hljs"># try/catch block to make sure you can start julia if Revise should not be installed
try
    using Revise
catch e
    @warn(e.msg)
end</code></pre></div></div><div class="admonition is-warning"><header class="admonition-header">Warning</header><div class="admonition-body"><p>At some point along the way you should run into problems with the <code>sample</code> functions or when trying <code>using StatsBase</code>. This is normal, because you have not added the package to the <code>Ecosystem</code> environment yet. Adding it is as easy as <code>]add StatsBase</code>. Your <code>Ecosystem</code> environment should now look like this:</p><pre><code class="nohighlight hljs">(Ecosystem) pkg&gt; status
Project Ecosystem v0.1.0
Status `~/repos/Ecosystem/Project.toml`
  [2913bbd2] StatsBase v0.33.21</code></pre></div></div><div class="admonition is-category-exercise">
<header class="admonition-header">Exercise:</header>
<div class="admonition-body"><p>In order to use your new types/functions like below</p><pre><code class="language-julia hljs">using Ecosystem

Sheep(2)</code></pre><p>you have to <code>export</code> them from your module. Add exports for all important types and functions.</p></div></div>
<details class = "solution-body">
<summary class = "solution-header">Solution:</summary><p><pre><code class="language-julia hljs"># src/Ecosystem.jl
module Ecosystem

using StatsBase

export World
export Species, PlantSpecies, AnimalSpecies, Grass, Sheep, Wolf
export Agent, Plant, Animal
export agent_step!, eat!, eats, find_food, reproduce!, world_step!, agent_count

# ....

end</code></pre></p></details><h3 id="Unit-tests"><a class="docs-heading-anchor" href="#Unit-tests">Unit tests</a><a id="Unit-tests-1"></a><a class="docs-heading-anchor-permalink" href="#Unit-tests" title="Permalink"></a></h3><p>Every package should have tests which verify the correctness of your implementation, such that you can make changes to your codebase and remain confident that you did not break anything.</p><p>Julia&#39;s <code>Test</code> package provides you functionality to easily write <a href="https://docs.julialang.org/en/v1/stdlib/Test/">unit tests</a>.</p><div class="admonition is-category-exercise">
<header class="admonition-header">Exercise:</header>
<div class="admonition-body"><p>In the file <code>test/runtests.jl</code>, create a new <code>@testset</code> and write three <code>@test</code>s which check that the <code>show</code> methods we defined for <code>Grass</code>, <code>Sheep</code>, and <code>Wolf</code> work as expected.</p><p>The function <code>repr(x) == &quot;some string&quot;</code> to check if the string representation we defined in the <code>Base.show</code> overload returns what you expect.</p></div></div>
<details class = "solution-body">
<summary class = "solution-header">Solution:</summary><p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; # using Ecosystem
       using Test</code><code class="nohighlight hljs ansi" style="display:block;"></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; @testset &quot;Base.show&quot; begin
           g = Grass(1,1,1)
           s = Animal{Sheep}(2,1,1,1,1,male)
           w = Animal{Wolf}(3,1,1,1,1,female)
           @test repr(g) == &quot;🌿  #1 100% grown&quot;
           @test repr(s) == &quot;🐑♂ #2 E=1.0 ΔE=1.0 pr=1.0 pf=1.0&quot;
           @test repr(w) == &quot;🐺♀ #3 E=1.0 ΔE=1.0 pr=1.0 pf=1.0&quot;
       end</code><code class="nohighlight hljs ansi" style="display:block;"><span class="sgr1">Test Summary: | <span class="sgr32">Pass  </span><span class="sgr36">Total  </span>Time</span>
Base.show     | <span class="sgr32">   3  </span><span class="sgr36">    3  </span>0.2s
Test.DefaultTestSet(&quot;Base.show&quot;, Any[], 3, false, false, true, 1.665835148040647e9, 1.66583514824491e9)</code></pre></p></details><h3 id="Github-CI"><a class="docs-heading-anchor" href="#Github-CI">Github CI</a><a id="Github-CI-1"></a><a class="docs-heading-anchor-permalink" href="#Github-CI" title="Permalink"></a></h3><div class="admonition is-category-exercise">
<header class="admonition-header">Exercise:</header>
<div class="admonition-body"><p>If you want you can upload you package to Github and add the <code>julia-runtest</code> <a href="https://github.com/julia-actions/julia-runtest">Github Action</a> to automatically test your code for every new push you make to the repository.</p></div></div></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../lecture/">« Lecture</a><a class="docs-footer-nextpage" href="../hw/">Homework »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.23 on <span class="colophon-date" title="Saturday 15 October 2022 12:00">Saturday 15 October 2022</span>. Using Julia version 1.8.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
