<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Lab ¬∑ Scientific Programming in Julia</title><script data-outdated-warner src="../../assets/warner.js"></script><link rel="canonical" href="https://JuliaTeachingCTU.github.io/Scientific-Programming-in-Julia/lecture_04/lab/"/><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><link href="../../assets/favicon.ico" rel="icon" type="image/x-icon"/><link href="../../assets/onlinestats.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img class="docs-light-only" src="../../assets/logo.svg" alt="Scientific Programming in Julia logo"/><img class="docs-dark-only" src="../../assets/logo-dark.svg" alt="Scientific Programming in Julia logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">Scientific Programming in Julia</a></span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><a class="tocitem" href="../../installation/">Installation</a></li><li><a class="tocitem" href="../../projects/">Projects</a></li><li><input class="collapse-toggle" id="menuitem-4" type="checkbox"/><label class="tocitem" for="menuitem-4"><span class="docs-label">1: Introduction</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../lecture_01/motivation/">Motivation</a></li><li><a class="tocitem" href="../../lecture_01/basics/">Basics</a></li><li><a class="tocitem" href="../../lecture_01/demo/">Examples</a></li><li><a class="tocitem" href="../../lecture_01/outline/">Outline</a></li><li><a class="tocitem" href="../../lecture_01/lab/">Lab</a></li><li><a class="tocitem" href="../../lecture_01/hw/">Homework</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-5" type="checkbox"/><label class="tocitem" for="menuitem-5"><span class="docs-label">2: The power of Type System &amp; multiple dispatch</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../lecture_02/lecture/">Lecture</a></li><li><a class="tocitem" href="../../lecture_02/lab/">Lab</a></li><li><a class="tocitem" href="../../lecture_02/hw/">Homework</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-6" type="checkbox"/><label class="tocitem" for="menuitem-6"><span class="docs-label">3: Design Patterns</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../lecture_03/lecture/">Lecture</a></li><li><a class="tocitem" href="../../lecture_03/lab/">Lab</a></li><li><a class="tocitem" href="../../lecture_03/hw/">Homework</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-7" type="checkbox" checked/><label class="tocitem" for="menuitem-7"><span class="docs-label">4: Package development, Unit test &amp; CI</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../lecture/">Lecture</a></li><li class="is-active"><a class="tocitem" href>Lab</a><ul class="internal"><li><a class="tocitem" href="#Warmup-Stepping-through-time"><span>Warmup - Stepping through time</span></a></li><li><a class="tocitem" href="#Package:-Ecosystem.jl"><span>Package: <code>Ecosystem.jl</code></span></a></li></ul></li><li><a class="tocitem" href="../hw/">Homework</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-8" type="checkbox"/><label class="tocitem" for="menuitem-8"><span class="docs-label">5: Performance Benchmarking</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../lecture_05/lecture/">Lecture</a></li><li><a class="tocitem" href="../../lecture_05/lab/">Lab</a></li><li><a class="tocitem" href="../../lecture_05/hw/">Homework</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">4: Package development, Unit test &amp; CI</a></li><li class="is-active"><a href>Lab</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Lab</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/JuliaTeachingCTU/Scientific-Programming-in-Julia/blob/2022W/docs/src/lecture_04/lab.md#" title="Edit on GitHub"><span class="docs-icon fab">ÔÇõ</span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Lab-04:-Packaging"><a class="docs-heading-anchor" href="#Lab-04:-Packaging">Lab 04: Packaging</a><a id="Lab-04:-Packaging-1"></a><a class="docs-heading-anchor-permalink" href="#Lab-04:-Packaging" title="Permalink"></a></h1><h2 id="Warmup-Stepping-through-time"><a class="docs-heading-anchor" href="#Warmup-Stepping-through-time">Warmup - Stepping through time</a><a id="Warmup-Stepping-through-time-1"></a><a class="docs-heading-anchor-permalink" href="#Warmup-Stepping-through-time" title="Permalink"></a></h2><p>We now have all necessary functions in place to make agents perform one step of our simulation.  At the beginning of each step an animal looses energy. Afterwards it tries to find some food, which it will subsequently eat. If the animal then has less than zero energy it dies and is removed from the world. If it has positive energy it will try to reproduce.</p><p>Plants have a simpler life. They simply grow if they have not reached their maximal size.</p><div class="admonition is-category-exercise">
<header class="admonition-header">Exercise:</header>
<div class="admonition-body"><ol><li>Implement a method <code>agent_step!(::Animal,::World)</code> which performs the following steps:<ul><li>Decrement <span>$E$</span> of agent by <code>1.0</code>.</li><li>With <span>$p_f$</span>, try to find some food and eat it.</li><li>If <span>$E&lt;0$</span>, the animal dies.</li><li>With <span>$p_r$</span>, try to reproduce.</li></ul></li><li>Implement a method <code>agent_step!(::Plant,::World)</code> which performs the following steps:<ul><li>If the size of the plant is smaller than <code>max_size</code>, increment the plant&#39;s size by one.</li></ul></li></ol></div></div>
<details class = "solution-body">
<summary class = "solution-header">Solution:</summary><p><pre><code class="language-julia hljs">function agent_step!(p::Plant, w::World)
    if p.size &lt; p.max_size
        p.size += 1
    end
end

function agent_step!(a::Animal, w::World)
    a.energy -= 1
    if rand() &lt;= a.foodprob
        dinner = find_food(a,w)
        eat!(a, dinner, w)
    end
    if a.energy &lt; 0
        kill_agent!(a,w)
        return
    end
    if rand() &lt;= a.reprprob
        reproduce!(a,w)
    end
end</code></pre></p></details><p>An <code>agent_step!</code> of a sheep in a world with a single grass should make it consume the grass, let it reproduce, and eventually die if there is no more food and its energy is at zero:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; sheep = Sheep(1,2.0,2.0,1.0,1.0,male);</code><code class="nohighlight hljs ansi" style="display:block;"></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; grass = Grass(2,2,2);</code><code class="nohighlight hljs ansi" style="display:block;"></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; world = World([sheep, grass])</code><code class="nohighlight hljs ansi" style="display:block;">Main.World{Main.Agent}
  üåø  #2 100% grown
  üêë‚ôÇ #1 E=2.0 ŒîE=2.0 pr=1.0 pf=1.0</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; agent_step!(sheep, world); world</code><code class="nohighlight hljs ansi" style="display:block;">Main.World{Main.Agent}
  üåø  #2 0% grown
  üêë‚ôÇ #1 E=5.0 ŒîE=2.0 pr=1.0 pf=1.0</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; # NOTE: The second agent step leads to an error.
       # Can you figure out what is the problem here?
       agent_step!(sheep, world); world</code><code class="nohighlight hljs ansi" style="display:block;">ERROR: MethodError: no method matching eat!(::Main.Animal{üêë}, ::Nothing, ::Main.World{Main.Agent})
Closest candidates are:
  eat!(::Main.Animal{üêë}, <span class="sgr91">::Main.Plant{üåø}</span>, ::Main.World) at ~/work/Scientific-Programming-in-Julia/Scientific-Programming-in-Julia/docs/src/lecture_03/Lab03Ecosystem.jl:106
  eat!(<span class="sgr91">::Main.Animal{üê∫}</span>, <span class="sgr91">::Main.Animal{üêë}</span>, ::Main.World) at ~/work/Scientific-Programming-in-Julia/Scientific-Programming-in-Julia/docs/src/lecture_03/Lab03Ecosystem.jl:110</code></pre><div class="admonition is-category-exercise">
<header class="admonition-header">Exercise:</header>
<div class="admonition-body"><p>Finally, lets implement a function <code>world_step!</code> which performs one <code>agent_step!</code> for each agent.  Note that simply iterating over all agents could lead to problems because we are mutating the agent dictionary.  One solution for this is to iterate over a copy of all agent IDs that are present when starting to iterate over agents.  Additionally, it could happen that an agent is killed by another one before we apply <code>agent_step!</code> to it. To solve this you can check if a given ID is currently present in the <code>World</code>.</p></div></div>
<details class = "solution-body">
<summary class = "solution-header">Solution:</summary><p><pre><code class="language-julia hljs"># make it possible to eat nothing
eat!(::Animal, ::Nothing, ::World) = nothing

function world_step!(world::World)
    # make sure that we only iterate over IDs that already exist in the
    # current timestep this lets us safely add agents
    ids = copy(keys(world.agents))

    for id in ids
        # agents can be killed by other agents, so make sure that we are
        # not stepping dead agents forward
        !haskey(world.agents,id) &amp;&amp; continue

        a = world.agents[id]
        agent_step!(a,world)
    end
end</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">world_step! (generic function with 1 method)</code></pre></p></details><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; w = World([Sheep(1), Sheep(2), Wolf(3)])</code><code class="nohighlight hljs ansi" style="display:block;">Main.World{Main.Animal}
  üêë‚ôÇ #2 E=4.0 ŒîE=0.2 pr=0.8 pf=0.6
  üê∫‚ôÇ #3 E=10.0 ŒîE=8.0 pr=0.1 pf=0.2
  üêë‚ôÇ #1 E=4.0 ŒîE=0.2 pr=0.8 pf=0.6</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; world_step!(w); w</code><code class="nohighlight hljs ansi" style="display:block;">Main.World{Main.Animal}
  üê∫‚ôÇ #3 E=33.0 ŒîE=8.0 pr=0.1 pf=0.2
  üêë‚ôÇ #1 E=3.0 ŒîE=0.2 pr=0.8 pf=0.6</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; world_step!(w); w</code><code class="nohighlight hljs ansi" style="display:block;">Main.World{Main.Animal}
  üê∫‚ôÇ #3 E=32.0 ŒîE=8.0 pr=0.1 pf=0.2
  üêë‚ôÇ #1 E=2.0 ŒîE=0.2 pr=0.8 pf=0.6</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; world_step!(w); w</code><code class="nohighlight hljs ansi" style="display:block;">Main.World{Main.Animal}
  üê∫‚ôÇ #3 E=31.0 ŒîE=8.0 pr=0.1 pf=0.2
  üêë‚ôÇ #1 E=1.0 ŒîE=0.2 pr=0.8 pf=0.6</code></pre><p>Finally, lets run a few simulation steps and plot the solution</p><pre><code class="language-julia hljs">n_grass  = 1_000
n_sheep  = 40
n_wolves = 4

gs = [Grass(id) for id in 1:n_grass]
ss = [Sheep(id) for id in (n_grass+1):(n_grass+n_sheep)]
ws = [Wolf(id) for id in (n_grass+n_sheep+1):(n_grass+n_sheep+n_wolves)]
w  = World(vcat(gs,ss,ws))

counts = Dict(n=&gt;[c] for (n,c) in agent_count(w))
for _ in 1:100
    world_step!(w)
    for (n,c) in agent_count(w)
        push!(counts[n],c)
    end
end

using Plots
plt = plot()
tolabel(::Type{Animal{Sheep}}) = &quot;Sheep&quot;
tolabel(::Type{Animal{Wolf}}) = &quot;Wolf&quot;
tolabel(::Type{Plant{Grass}}) = &quot;Grass&quot;
for (A,c) in counts
    plot!(plt, c, label=tolabel(A), lw=2)
end
plt</code></pre><?xml version="1.0" encoding="utf-8"?>
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="600" height="400" viewBox="0 0 2400 1600">
<defs>
  <clipPath id="clip870">
    <rect x="0" y="0" width="2400" height="1600"/>
  </clipPath>
</defs>
<path clip-path="url(#clip870)" d="
M0 1600 L2400 1600 L2400 0 L0 0  Z
  " fill="#ffffff" fill-rule="evenodd" fill-opacity="1"/>
<defs>
  <clipPath id="clip871">
    <rect x="480" y="0" width="1681" height="1600"/>
  </clipPath>
</defs>
<path clip-path="url(#clip870)" d="
M172.015 1486.45 L2352.76 1486.45 L2352.76 47.2441 L172.015 47.2441  Z
  " fill="#ffffff" fill-rule="evenodd" fill-opacity="1"/>
<defs>
  <clipPath id="clip872">
    <rect x="172" y="47" width="2182" height="1440"/>
  </clipPath>
</defs>
<polyline clip-path="url(#clip872)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  213.161,1486.45 213.161,47.2441 
  "/>
<polyline clip-path="url(#clip872)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  727.487,1486.45 727.487,47.2441 
  "/>
<polyline clip-path="url(#clip872)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  1241.81,1486.45 1241.81,47.2441 
  "/>
<polyline clip-path="url(#clip872)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  1756.14,1486.45 1756.14,47.2441 
  "/>
<polyline clip-path="url(#clip872)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  2270.46,1486.45 2270.46,47.2441 
  "/>
<polyline clip-path="url(#clip870)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  172.015,1486.45 2352.76,1486.45 
  "/>
<polyline clip-path="url(#clip870)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  213.161,1486.45 213.161,1467.55 
  "/>
<polyline clip-path="url(#clip870)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  727.487,1486.45 727.487,1467.55 
  "/>
<polyline clip-path="url(#clip870)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  1241.81,1486.45 1241.81,1467.55 
  "/>
<polyline clip-path="url(#clip870)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  1756.14,1486.45 1756.14,1467.55 
  "/>
<polyline clip-path="url(#clip870)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  2270.46,1486.45 2270.46,1467.55 
  "/>
<path clip-path="url(#clip870)" d="M213.161 1517.37 Q209.55 1517.37 207.721 1520.93 Q205.916 1524.47 205.916 1531.6 Q205.916 1538.71 207.721 1542.27 Q209.55 1545.82 213.161 1545.82 Q216.795 1545.82 218.601 1542.27 Q220.429 1538.71 220.429 1531.6 Q220.429 1524.47 218.601 1520.93 Q216.795 1517.37 213.161 1517.37 M213.161 1513.66 Q218.971 1513.66 222.027 1518.27 Q225.105 1522.85 225.105 1531.6 Q225.105 1540.33 222.027 1544.94 Q218.971 1549.52 213.161 1549.52 Q207.351 1549.52 204.272 1544.94 Q201.216 1540.33 201.216 1531.6 Q201.216 1522.85 204.272 1518.27 Q207.351 1513.66 213.161 1513.66 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip870)" d="M706.758 1544.91 L723.077 1544.91 L723.077 1548.85 L701.133 1548.85 L701.133 1544.91 Q703.795 1542.16 708.378 1537.53 Q712.984 1532.88 714.165 1531.53 Q716.41 1529.01 717.29 1527.27 Q718.193 1525.51 718.193 1523.82 Q718.193 1521.07 716.248 1519.33 Q714.327 1517.6 711.225 1517.6 Q709.026 1517.6 706.572 1518.36 Q704.142 1519.13 701.364 1520.68 L701.364 1515.95 Q704.188 1514.82 706.642 1514.24 Q709.095 1513.66 711.133 1513.66 Q716.503 1513.66 719.697 1516.35 Q722.892 1519.03 722.892 1523.52 Q722.892 1525.65 722.082 1527.57 Q721.295 1529.47 719.188 1532.07 Q718.609 1532.74 715.508 1535.95 Q712.406 1539.15 706.758 1544.91 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip870)" d="M732.938 1514.29 L751.294 1514.29 L751.294 1518.22 L737.22 1518.22 L737.22 1526.7 Q738.239 1526.35 739.257 1526.19 Q740.276 1526 741.294 1526 Q747.081 1526 750.461 1529.17 Q753.841 1532.34 753.841 1537.76 Q753.841 1543.34 750.368 1546.44 Q746.896 1549.52 740.577 1549.52 Q738.401 1549.52 736.132 1549.15 Q733.887 1548.78 731.48 1548.04 L731.48 1543.34 Q733.563 1544.47 735.785 1545.03 Q738.007 1545.58 740.484 1545.58 Q744.489 1545.58 746.827 1543.48 Q749.165 1541.37 749.165 1537.76 Q749.165 1534.15 746.827 1532.04 Q744.489 1529.94 740.484 1529.94 Q738.609 1529.94 736.734 1530.35 Q734.882 1530.77 732.938 1531.65 L732.938 1514.29 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip870)" d="M1216.51 1514.29 L1234.87 1514.29 L1234.87 1518.22 L1220.79 1518.22 L1220.79 1526.7 Q1221.81 1526.35 1222.83 1526.19 Q1223.85 1526 1224.87 1526 Q1230.65 1526 1234.03 1529.17 Q1237.41 1532.34 1237.41 1537.76 Q1237.41 1543.34 1233.94 1546.44 Q1230.47 1549.52 1224.15 1549.52 Q1221.97 1549.52 1219.71 1549.15 Q1217.46 1548.78 1215.05 1548.04 L1215.05 1543.34 Q1217.14 1544.47 1219.36 1545.03 Q1221.58 1545.58 1224.06 1545.58 Q1228.06 1545.58 1230.4 1543.48 Q1232.74 1541.37 1232.74 1537.76 Q1232.74 1534.15 1230.4 1532.04 Q1228.06 1529.94 1224.06 1529.94 Q1222.18 1529.94 1220.31 1530.35 Q1218.46 1530.77 1216.51 1531.65 L1216.51 1514.29 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip870)" d="M1256.63 1517.37 Q1253.02 1517.37 1251.19 1520.93 Q1249.38 1524.47 1249.38 1531.6 Q1249.38 1538.71 1251.19 1542.27 Q1253.02 1545.82 1256.63 1545.82 Q1260.26 1545.82 1262.07 1542.27 Q1263.9 1538.71 1263.9 1531.6 Q1263.9 1524.47 1262.07 1520.93 Q1260.26 1517.37 1256.63 1517.37 M1256.63 1513.66 Q1262.44 1513.66 1265.49 1518.27 Q1268.57 1522.85 1268.57 1531.6 Q1268.57 1540.33 1265.49 1544.94 Q1262.44 1549.52 1256.63 1549.52 Q1250.82 1549.52 1247.74 1544.94 Q1244.68 1540.33 1244.68 1531.6 Q1244.68 1522.85 1247.74 1518.27 Q1250.82 1513.66 1256.63 1513.66 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip870)" d="M1729.99 1514.29 L1752.21 1514.29 L1752.21 1516.28 L1739.67 1548.85 L1734.78 1548.85 L1746.59 1518.22 L1729.99 1518.22 L1729.99 1514.29 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip870)" d="M1761.38 1514.29 L1779.74 1514.29 L1779.74 1518.22 L1765.66 1518.22 L1765.66 1526.7 Q1766.68 1526.35 1767.7 1526.19 Q1768.72 1526 1769.74 1526 Q1775.52 1526 1778.9 1529.17 Q1782.28 1532.34 1782.28 1537.76 Q1782.28 1543.34 1778.81 1546.44 Q1775.34 1549.52 1769.02 1549.52 Q1766.84 1549.52 1764.58 1549.15 Q1762.33 1548.78 1759.92 1548.04 L1759.92 1543.34 Q1762.01 1544.47 1764.23 1545.03 Q1766.45 1545.58 1768.93 1545.58 Q1772.93 1545.58 1775.27 1543.48 Q1777.61 1541.37 1777.61 1537.76 Q1777.61 1534.15 1775.27 1532.04 Q1772.93 1529.94 1768.93 1529.94 Q1767.05 1529.94 1765.18 1530.35 Q1763.33 1530.77 1761.38 1531.65 L1761.38 1514.29 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip870)" d="M2230.07 1544.91 L2237.71 1544.91 L2237.71 1518.55 L2229.4 1520.21 L2229.4 1515.95 L2237.66 1514.29 L2242.34 1514.29 L2242.34 1544.91 L2249.98 1544.91 L2249.98 1548.85 L2230.07 1548.85 L2230.07 1544.91 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip870)" d="M2269.42 1517.37 Q2265.81 1517.37 2263.98 1520.93 Q2262.18 1524.47 2262.18 1531.6 Q2262.18 1538.71 2263.98 1542.27 Q2265.81 1545.82 2269.42 1545.82 Q2273.06 1545.82 2274.86 1542.27 Q2276.69 1538.71 2276.69 1531.6 Q2276.69 1524.47 2274.86 1520.93 Q2273.06 1517.37 2269.42 1517.37 M2269.42 1513.66 Q2275.23 1513.66 2278.29 1518.27 Q2281.37 1522.85 2281.37 1531.6 Q2281.37 1540.33 2278.29 1544.94 Q2275.23 1549.52 2269.42 1549.52 Q2263.61 1549.52 2260.53 1544.94 Q2257.48 1540.33 2257.48 1531.6 Q2257.48 1522.85 2260.53 1518.27 Q2263.61 1513.66 2269.42 1513.66 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip870)" d="M2299.58 1517.37 Q2295.97 1517.37 2294.14 1520.93 Q2292.34 1524.47 2292.34 1531.6 Q2292.34 1538.71 2294.14 1542.27 Q2295.97 1545.82 2299.58 1545.82 Q2303.22 1545.82 2305.02 1542.27 Q2306.85 1538.71 2306.85 1531.6 Q2306.85 1524.47 2305.02 1520.93 Q2303.22 1517.37 2299.58 1517.37 M2299.58 1513.66 Q2305.39 1513.66 2308.45 1518.27 Q2311.53 1522.85 2311.53 1531.6 Q2311.53 1540.33 2308.45 1544.94 Q2305.39 1549.52 2299.58 1549.52 Q2293.77 1549.52 2290.7 1544.94 Q2287.64 1540.33 2287.64 1531.6 Q2287.64 1522.85 2290.7 1518.27 Q2293.77 1513.66 2299.58 1513.66 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><polyline clip-path="url(#clip872)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  172.015,1453.07 2352.76,1453.07 
  "/>
<polyline clip-path="url(#clip872)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  172.015,1085.17 2352.76,1085.17 
  "/>
<polyline clip-path="url(#clip872)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  172.015,717.271 2352.76,717.271 
  "/>
<polyline clip-path="url(#clip872)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:2; stroke-opacity:0.1; fill:none" points="
  172.015,349.37 2352.76,349.37 
  "/>
<polyline clip-path="url(#clip870)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  172.015,1486.45 172.015,47.2441 
  "/>
<polyline clip-path="url(#clip870)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  172.015,1453.07 190.912,1453.07 
  "/>
<polyline clip-path="url(#clip870)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  172.015,1085.17 190.912,1085.17 
  "/>
<polyline clip-path="url(#clip870)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  172.015,717.271 190.912,717.271 
  "/>
<polyline clip-path="url(#clip870)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  172.015,349.37 190.912,349.37 
  "/>
<path clip-path="url(#clip870)" d="M124.07 1438.87 Q120.459 1438.87 118.631 1442.44 Q116.825 1445.98 116.825 1453.11 Q116.825 1460.21 118.631 1463.78 Q120.459 1467.32 124.07 1467.32 Q127.705 1467.32 129.51 1463.78 Q131.339 1460.21 131.339 1453.11 Q131.339 1445.98 129.51 1442.44 Q127.705 1438.87 124.07 1438.87 M124.07 1435.17 Q129.881 1435.17 132.936 1439.78 Q136.015 1444.36 136.015 1453.11 Q136.015 1461.84 132.936 1466.44 Q129.881 1471.03 124.07 1471.03 Q118.26 1471.03 115.182 1466.44 Q112.126 1461.84 112.126 1453.11 Q112.126 1444.36 115.182 1439.78 Q118.26 1435.17 124.07 1435.17 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip870)" d="M57.7745 1098.52 L74.0939 1098.52 L74.0939 1102.45 L52.1495 1102.45 L52.1495 1098.52 Q54.8115 1095.76 59.3949 1091.13 Q64.0013 1086.48 65.1819 1085.14 Q67.4272 1082.61 68.3068 1080.88 Q69.2096 1079.12 69.2096 1077.43 Q69.2096 1074.67 67.2652 1072.94 Q65.3439 1071.2 62.2421 1071.2 Q60.043 1071.2 57.5893 1071.97 Q55.1588 1072.73 52.381 1074.28 L52.381 1069.56 Q55.2051 1068.42 57.6588 1067.85 Q60.1124 1067.27 62.1495 1067.27 Q67.5198 1067.27 70.7142 1069.95 Q73.9087 1072.64 73.9087 1077.13 Q73.9087 1079.26 73.0985 1081.18 Q72.3115 1083.08 70.205 1085.67 Q69.6263 1086.34 66.5245 1089.56 Q63.4226 1092.75 57.7745 1098.52 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip870)" d="M93.9086 1070.97 Q90.2975 1070.97 88.4688 1074.54 Q86.6632 1078.08 86.6632 1085.21 Q86.6632 1092.31 88.4688 1095.88 Q90.2975 1099.42 93.9086 1099.42 Q97.5428 1099.42 99.3483 1095.88 Q101.177 1092.31 101.177 1085.21 Q101.177 1078.08 99.3483 1074.54 Q97.5428 1070.97 93.9086 1070.97 M93.9086 1067.27 Q99.7187 1067.27 102.774 1071.87 Q105.853 1076.46 105.853 1085.21 Q105.853 1093.93 102.774 1098.54 Q99.7187 1103.12 93.9086 1103.12 Q88.0984 1103.12 85.0197 1098.54 Q81.9642 1093.93 81.9642 1085.21 Q81.9642 1076.46 85.0197 1071.87 Q88.0984 1067.27 93.9086 1067.27 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip870)" d="M124.07 1070.97 Q120.459 1070.97 118.631 1074.54 Q116.825 1078.08 116.825 1085.21 Q116.825 1092.31 118.631 1095.88 Q120.459 1099.42 124.07 1099.42 Q127.705 1099.42 129.51 1095.88 Q131.339 1092.31 131.339 1085.21 Q131.339 1078.08 129.51 1074.54 Q127.705 1070.97 124.07 1070.97 M124.07 1067.27 Q129.881 1067.27 132.936 1071.87 Q136.015 1076.46 136.015 1085.21 Q136.015 1093.93 132.936 1098.54 Q129.881 1103.12 124.07 1103.12 Q118.26 1103.12 115.182 1098.54 Q112.126 1093.93 112.126 1085.21 Q112.126 1076.46 115.182 1071.87 Q118.26 1067.27 124.07 1067.27 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip870)" d="M66.5939 704.065 L54.7884 722.514 L66.5939 722.514 L66.5939 704.065 M65.367 699.991 L71.2466 699.991 L71.2466 722.514 L76.1772 722.514 L76.1772 726.403 L71.2466 726.403 L71.2466 734.551 L66.5939 734.551 L66.5939 726.403 L50.9921 726.403 L50.9921 721.889 L65.367 699.991 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip870)" d="M93.9086 703.07 Q90.2975 703.07 88.4688 706.635 Q86.6632 710.176 86.6632 717.306 Q86.6632 724.412 88.4688 727.977 Q90.2975 731.519 93.9086 731.519 Q97.5428 731.519 99.3483 727.977 Q101.177 724.412 101.177 717.306 Q101.177 710.176 99.3483 706.635 Q97.5428 703.07 93.9086 703.07 M93.9086 699.366 Q99.7187 699.366 102.774 703.973 Q105.853 708.556 105.853 717.306 Q105.853 726.033 102.774 730.639 Q99.7187 735.223 93.9086 735.223 Q88.0984 735.223 85.0197 730.639 Q81.9642 726.033 81.9642 717.306 Q81.9642 708.556 85.0197 703.973 Q88.0984 699.366 93.9086 699.366 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip870)" d="M124.07 703.07 Q120.459 703.07 118.631 706.635 Q116.825 710.176 116.825 717.306 Q116.825 724.412 118.631 727.977 Q120.459 731.519 124.07 731.519 Q127.705 731.519 129.51 727.977 Q131.339 724.412 131.339 717.306 Q131.339 710.176 129.51 706.635 Q127.705 703.07 124.07 703.07 M124.07 699.366 Q129.881 699.366 132.936 703.973 Q136.015 708.556 136.015 717.306 Q136.015 726.033 132.936 730.639 Q129.881 735.223 124.07 735.223 Q118.26 735.223 115.182 730.639 Q112.126 726.033 112.126 717.306 Q112.126 708.556 115.182 703.973 Q118.26 699.366 124.07 699.366 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip870)" d="M64.3254 347.507 Q61.1773 347.507 59.3254 349.659 Q57.4967 351.812 57.4967 355.562 Q57.4967 359.289 59.3254 361.465 Q61.1773 363.618 64.3254 363.618 Q67.4735 363.618 69.3022 361.465 Q71.1541 359.289 71.1541 355.562 Q71.1541 351.812 69.3022 349.659 Q67.4735 347.507 64.3254 347.507 M73.6077 332.854 L73.6077 337.113 Q71.8485 336.28 70.0429 335.84 Q68.2606 335.4 66.5013 335.4 Q61.8717 335.4 59.418 338.525 Q56.9875 341.65 56.6402 347.97 Q58.006 345.956 60.0662 344.891 Q62.1263 343.803 64.6032 343.803 Q69.8115 343.803 72.8207 346.974 Q75.8531 350.122 75.8531 355.562 Q75.8531 360.886 72.705 364.104 Q69.5568 367.321 64.3254 367.321 Q58.33 367.321 55.1588 362.738 Q51.9875 358.132 51.9875 349.405 Q51.9875 341.21 55.8764 336.349 Q59.7652 331.465 66.3161 331.465 Q68.0754 331.465 69.8578 331.812 Q71.6633 332.16 73.6077 332.854 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip870)" d="M93.9086 335.169 Q90.2975 335.169 88.4688 338.734 Q86.6632 342.275 86.6632 349.405 Q86.6632 356.511 88.4688 360.076 Q90.2975 363.618 93.9086 363.618 Q97.5428 363.618 99.3483 360.076 Q101.177 356.511 101.177 349.405 Q101.177 342.275 99.3483 338.734 Q97.5428 335.169 93.9086 335.169 M93.9086 331.465 Q99.7187 331.465 102.774 336.072 Q105.853 340.655 105.853 349.405 Q105.853 358.132 102.774 362.738 Q99.7187 367.321 93.9086 367.321 Q88.0984 367.321 85.0197 362.738 Q81.9642 358.132 81.9642 349.405 Q81.9642 340.655 85.0197 336.072 Q88.0984 331.465 93.9086 331.465 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip870)" d="M124.07 335.169 Q120.459 335.169 118.631 338.734 Q116.825 342.275 116.825 349.405 Q116.825 356.511 118.631 360.076 Q120.459 363.618 124.07 363.618 Q127.705 363.618 129.51 360.076 Q131.339 356.511 131.339 349.405 Q131.339 342.275 129.51 338.734 Q127.705 335.169 124.07 335.169 M124.07 331.465 Q129.881 331.465 132.936 336.072 Q136.015 340.655 136.015 349.405 Q136.015 358.132 132.936 362.738 Q129.881 367.321 124.07 367.321 Q118.26 367.321 115.182 362.738 Q112.126 358.132 112.126 349.405 Q112.126 340.655 115.182 336.072 Q118.26 331.465 124.07 331.465 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><polyline clip-path="url(#clip872)" style="stroke:#009af9; stroke-linecap:round; stroke-linejoin:round; stroke-width:8; stroke-opacity:1; fill:none" points="
  233.734,1445.72 254.307,1445.72 274.88,1445.72 295.453,1445.72 316.026,1445.72 336.599,1443.88 357.172,1443.88 377.745,1443.88 398.318,1443.88 418.891,1442.04 
  439.464,1438.36 460.037,1436.52 480.61,1436.52 501.183,1436.52 521.756,1436.52 542.329,1432.84 562.902,1429.16 583.475,1425.48 604.048,1429.16 624.621,1429.16 
  645.194,1432.84 665.768,1431 686.341,1432.84 706.914,1431 727.487,1432.84 748.06,1432.84 768.633,1431 789.206,1427.32 809.779,1429.16 830.352,1434.68 
  850.925,1432.84 871.498,1432.84 892.071,1432.84 912.644,1436.52 933.217,1436.52 953.79,1432.84 974.363,1434.68 994.936,1432.84 1015.51,1432.84 1036.08,1427.32 
  1056.66,1427.32 1077.23,1421.8 1097.8,1418.12 1118.37,1418.12 1138.95,1421.8 1159.52,1421.8 1180.09,1414.44 1200.67,1418.12 1221.24,1419.96 1241.81,1432.84 
  1262.39,1436.52 1282.96,1434.68 1303.53,1432.84 1324.1,1436.52 1344.68,1431 1365.25,1427.32 1385.82,1427.32 1406.4,1427.32 1426.97,1425.48 1447.54,1429.16 
  1468.12,1429.16 1488.69,1425.48 1509.26,1427.32 1529.83,1423.64 1550.41,1423.64 1570.98,1425.48 1591.55,1434.68 1612.13,1434.68 1632.7,1429.16 1653.27,1423.64 
  1673.85,1421.8 1694.42,1421.8 1714.99,1427.32 1735.57,1425.48 1756.14,1419.96 1776.71,1419.96 1797.28,1425.48 1817.86,1423.64 1838.43,1423.64 1859,1418.12 
  1879.58,1416.28 1900.15,1416.28 1920.72,1410.77 1941.3,1407.09 1961.87,1425.48 1982.44,1421.8 2003.01,1421.8 2023.59,1418.12 2044.16,1412.6 2064.73,1412.6 
  2085.31,1410.77 2105.88,1410.77 2126.45,1405.25 2147.03,1399.73 2167.6,1399.73 2188.17,1396.05 2208.74,1394.21 2229.32,1392.37 2249.89,1386.85 2270.46,1386.85 
  2291.04,1385.01 
  "/>
<polyline clip-path="url(#clip872)" style="stroke:#e26f46; stroke-linecap:round; stroke-linejoin:round; stroke-width:8; stroke-opacity:1; fill:none" points="
  233.734,1379.49 254.307,1318.79 274.88,1215.78 295.453,1110.93 316.026,1053.9 336.599,1017.11 357.172,1042.86 377.745,1077.81 398.318,1094.37 418.891,1072.3 
  439.464,1118.28 460.037,1167.95 480.61,1182.67 501.183,1230.49 521.756,1248.89 542.329,1247.05 562.902,1258.09 583.475,1248.89 604.048,1224.97 624.621,1173.47 
  645.194,1155.07 665.768,1142.2 686.341,1158.75 706.914,1147.72 727.487,1088.85 748.06,1053.9 768.633,1053.9 789.206,1110.93 809.779,1120.12 830.352,1125.64 
  850.925,1149.56 871.498,1153.23 892.071,1169.79 912.644,1188.18 933.217,1186.35 953.79,1162.43 974.363,1156.91 994.936,1153.23 1015.51,1133 1036.08,1178.99 
  1056.66,1175.31 1077.23,1202.9 1097.8,1208.42 1118.37,1167.95 1138.95,1197.38 1159.52,1213.94 1180.09,1182.67 1200.67,1202.9 1221.24,1219.46 1241.81,1228.65 
  1262.39,1228.65 1282.96,1206.58 1303.53,1171.63 1324.1,1162.43 1344.68,1149.56 1365.25,1123.8 1385.82,1114.6 1406.4,1085.17 1426.97,1140.36 1447.54,1134.84 
  1468.12,1178.99 1488.69,1241.53 1509.26,1217.62 1529.83,1234.17 1550.41,1243.37 1570.98,1228.65 1591.55,1243.37 1612.13,1248.89 1632.7,1241.53 1653.27,1234.17 
  1673.85,1219.46 1694.42,1208.42 1714.99,1166.11 1735.57,1129.32 1756.14,1140.36 1776.71,1098.05 1797.28,1074.14 1817.86,1087.01 1838.43,1094.37 1859,1074.14 
  1879.58,1118.28 1900.15,1114.6 1920.72,1169.79 1941.3,1204.74 1961.87,1226.81 1982.44,1243.37 2003.01,1278.32 2023.59,1276.48 2044.16,1274.64 2064.73,1250.73 
  2085.31,1256.25 2105.88,1254.41 2126.45,1234.17 2147.03,1236.01 2167.6,1245.21 2188.17,1234.17 2208.74,1217.62 2229.32,1221.3 2249.89,1193.7 2270.46,1184.51 
  2291.04,1140.36 
  "/>
<polyline clip-path="url(#clip872)" style="stroke:#3da44d; stroke-linecap:round; stroke-linejoin:round; stroke-width:8; stroke-opacity:1; fill:none" points="
  233.734,447.968 254.307,310.924 274.88,216.19 295.453,183.079 316.026,218.765 336.599,258.682 357.172,307.613 377.745,355.808 398.318,373.652 418.891,399.221 
  439.464,400.692 460.037,394.07 480.61,378.066 501.183,328.768 521.756,291.426 542.329,241.575 562.902,210.303 583.475,165.236 604.048,151.807 624.621,165.236 
  645.194,175.353 665.768,192.644 686.341,211.959 706.914,244.518 727.487,287.379 748.06,325.089 768.633,359.487 789.206,377.698 809.779,389.471 830.352,395.91 
  850.925,391.679 871.498,372.916 892.071,356.176 912.644,336.126 933.217,325.273 953.79,314.787 974.363,309.453 994.936,305.038 1015.51,309.821 1036.08,305.59 
  1056.66,293.265 1077.23,279.285 1097.8,267.696 1118.37,269.352 1138.95,255.923 1159.52,239.552 1180.09,232.561 1200.67,236.057 1221.24,217.661 1241.81,201.658 
  1262.39,186.39 1282.96,186.39 1303.53,200.738 1324.1,220.421 1344.68,240.839 1365.25,269.536 1385.82,292.713 1406.4,318.466 1426.97,327.48 1447.54,326.928 
  1468.12,310.557 1488.69,278.733 1509.26,255.187 1529.83,234.585 1550.41,204.233 1570.98,196.323 1591.55,173.513 1612.13,151.255 1632.7,137.459 1653.27,126.606 
  1673.85,129.181 1694.42,142.61 1714.99,161.74 1735.57,193.932 1756.14,228.515 1776.71,264.385 1797.28,325.824 1817.86,353.601 1838.43,371.812 1859,392.231 
  1879.58,406.211 1900.15,392.782 1920.72,375.491 1941.3,347.898 1961.87,316.811 1982.44,278.181 2003.01,235.689 2023.59,187.126 2044.16,151.439 2064.73,127.526 
  2085.31,106.555 2105.88,104.716 2126.45,87.9763 2147.03,89.6318 2167.6,93.6787 2188.17,103.612 2208.74,111.522 2229.32,134.148 2249.89,154.015 2270.46,164.868 
  2291.04,193.012 
  "/>
<path clip-path="url(#clip870)" d="
M1894.91 302.578 L2280.06 302.578 L2280.06 95.2176 L1894.91 95.2176  Z
  " fill="#ffffff" fill-rule="evenodd" fill-opacity="1"/>
<polyline clip-path="url(#clip870)" style="stroke:#000000; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  1894.91,302.578 2280.06,302.578 2280.06,95.2176 1894.91,95.2176 1894.91,302.578 
  "/>
<polyline clip-path="url(#clip870)" style="stroke:#009af9; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  1919.14,147.058 2064.53,147.058 
  "/>
<path clip-path="url(#clip870)" d="M2088.76 129.778 L2093.48 129.778 L2100.75 158.99 L2107.99 129.778 L2113.25 129.778 L2120.52 158.99 L2127.76 129.778 L2132.51 129.778 L2123.83 164.338 L2117.95 164.338 L2110.66 134.338 L2103.29 164.338 L2097.41 164.338 L2088.76 129.778 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip870)" d="M2145.79 141.398 Q2142.37 141.398 2140.38 144.083 Q2138.39 146.745 2138.39 151.398 Q2138.39 156.051 2140.35 158.736 Q2142.34 161.398 2145.79 161.398 Q2149.2 161.398 2151.19 158.713 Q2153.18 156.027 2153.18 151.398 Q2153.18 146.791 2151.19 144.106 Q2149.2 141.398 2145.79 141.398 M2145.79 137.787 Q2151.35 137.787 2154.52 141.398 Q2157.69 145.009 2157.69 151.398 Q2157.69 157.764 2154.52 161.398 Q2151.35 165.009 2145.79 165.009 Q2140.22 165.009 2137.04 161.398 Q2133.9 157.764 2133.9 151.398 Q2133.9 145.009 2137.04 141.398 Q2140.22 137.787 2145.79 137.787 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip870)" d="M2164.75 128.319 L2169.01 128.319 L2169.01 164.338 L2164.75 164.338 L2164.75 128.319 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip870)" d="M2191.05 128.319 L2191.05 131.861 L2186.97 131.861 Q2184.68 131.861 2183.78 132.787 Q2182.9 133.713 2182.9 136.12 L2182.9 138.412 L2189.91 138.412 L2189.91 141.722 L2182.9 141.722 L2182.9 164.338 L2178.62 164.338 L2178.62 141.722 L2174.54 141.722 L2174.54 138.412 L2178.62 138.412 L2178.62 136.606 Q2178.62 132.278 2180.63 130.31 Q2182.65 128.319 2187.02 128.319 L2191.05 128.319 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><polyline clip-path="url(#clip870)" style="stroke:#e26f46; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  1919.14,198.898 2064.53,198.898 
  "/>
<path clip-path="url(#clip870)" d="M2111 182.752 L2111 187.312 Q2108.34 186.039 2105.98 185.414 Q2103.62 184.789 2101.42 184.789 Q2097.6 184.789 2095.52 186.27 Q2093.46 187.752 2093.46 190.483 Q2093.46 192.775 2094.82 193.955 Q2096.21 195.113 2100.05 195.83 L2102.88 196.409 Q2108.11 197.405 2110.59 199.928 Q2113.09 202.428 2113.09 206.641 Q2113.09 211.664 2109.71 214.256 Q2106.35 216.849 2099.85 216.849 Q2097.39 216.849 2094.61 216.293 Q2091.86 215.738 2088.9 214.65 L2088.9 209.835 Q2091.74 211.432 2094.47 212.242 Q2097.21 213.053 2099.85 213.053 Q2103.85 213.053 2106.03 211.479 Q2108.2 209.904 2108.2 206.988 Q2108.2 204.442 2106.63 203.006 Q2105.08 201.571 2101.51 200.854 L2098.66 200.298 Q2093.43 199.256 2091.1 197.034 Q2088.76 194.812 2088.76 190.854 Q2088.76 186.27 2091.97 183.631 Q2095.22 180.993 2100.89 180.993 Q2103.32 180.993 2105.84 181.432 Q2108.36 181.872 2111 182.752 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip870)" d="M2141.74 200.529 L2141.74 216.178 L2137.48 216.178 L2137.48 200.668 Q2137.48 196.988 2136.05 195.159 Q2134.61 193.33 2131.74 193.33 Q2128.29 193.33 2126.3 195.53 Q2124.31 197.729 2124.31 201.525 L2124.31 216.178 L2120.03 216.178 L2120.03 180.159 L2124.31 180.159 L2124.31 194.28 Q2125.84 191.942 2127.9 190.784 Q2129.98 189.627 2132.69 189.627 Q2137.16 189.627 2139.45 192.405 Q2141.74 195.159 2141.74 200.529 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip870)" d="M2172.41 202.15 L2172.41 204.233 L2152.83 204.233 Q2153.11 208.631 2155.47 210.946 Q2157.85 213.238 2162.09 213.238 Q2164.54 213.238 2166.84 212.636 Q2169.15 212.034 2171.42 210.83 L2171.42 214.858 Q2169.13 215.83 2166.72 216.34 Q2164.31 216.849 2161.84 216.849 Q2155.63 216.849 2152 213.238 Q2148.39 209.627 2148.39 203.469 Q2148.39 197.104 2151.81 193.377 Q2155.26 189.627 2161.09 189.627 Q2166.33 189.627 2169.36 193.006 Q2172.41 196.363 2172.41 202.15 M2168.15 200.9 Q2168.11 197.405 2166.19 195.321 Q2164.29 193.238 2161.14 193.238 Q2157.58 193.238 2155.42 195.252 Q2153.29 197.266 2152.97 200.923 L2168.15 200.9 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip870)" d="M2201.58 202.15 L2201.58 204.233 L2182 204.233 Q2182.28 208.631 2184.64 210.946 Q2187.02 213.238 2191.26 213.238 Q2193.71 213.238 2196 212.636 Q2198.32 212.034 2200.59 210.83 L2200.59 214.858 Q2198.29 215.83 2195.89 216.34 Q2193.48 216.849 2191 216.849 Q2184.8 216.849 2181.16 213.238 Q2177.55 209.627 2177.55 203.469 Q2177.55 197.104 2180.98 193.377 Q2184.43 189.627 2190.26 189.627 Q2195.49 189.627 2198.53 193.006 Q2201.58 196.363 2201.58 202.15 M2197.32 200.9 Q2197.28 197.405 2195.35 195.321 Q2193.46 193.238 2190.31 193.238 Q2186.74 193.238 2184.59 195.252 Q2182.46 197.266 2182.14 200.923 L2197.32 200.9 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip870)" d="M2212.69 212.289 L2212.69 226.039 L2208.41 226.039 L2208.41 190.252 L2212.69 190.252 L2212.69 194.187 Q2214.03 191.872 2216.07 190.761 Q2218.13 189.627 2220.98 189.627 Q2225.7 189.627 2228.64 193.377 Q2231.6 197.127 2231.6 203.238 Q2231.6 209.349 2228.64 213.099 Q2225.7 216.849 2220.98 216.849 Q2218.13 216.849 2216.07 215.738 Q2214.03 214.603 2212.69 212.289 M2227.18 203.238 Q2227.18 198.539 2225.24 195.877 Q2223.32 193.192 2219.94 193.192 Q2216.56 193.192 2214.61 195.877 Q2212.69 198.539 2212.69 203.238 Q2212.69 207.937 2214.61 210.622 Q2216.56 213.284 2219.94 213.284 Q2223.32 213.284 2225.24 210.622 Q2227.18 207.937 2227.18 203.238 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><polyline clip-path="url(#clip870)" style="stroke:#3da44d; stroke-linecap:round; stroke-linejoin:round; stroke-width:4; stroke-opacity:1; fill:none" points="
  1919.14,250.738 2064.53,250.738 
  "/>
<path clip-path="url(#clip870)" d="M2114.31 263.087 L2114.31 253.805 L2106.67 253.805 L2106.67 249.962 L2118.94 249.962 L2118.94 264.8 Q2116.23 266.721 2112.97 267.717 Q2109.71 268.689 2106 268.689 Q2097.9 268.689 2093.32 263.967 Q2088.76 259.221 2088.76 250.772 Q2088.76 242.3 2093.32 237.578 Q2097.9 232.833 2106 232.833 Q2109.38 232.833 2112.41 233.666 Q2115.47 234.499 2118.04 236.12 L2118.04 241.096 Q2115.45 238.897 2112.53 237.786 Q2109.61 236.675 2106.4 236.675 Q2100.05 236.675 2096.86 240.217 Q2093.69 243.758 2093.69 250.772 Q2093.69 257.763 2096.86 261.305 Q2100.05 264.846 2106.4 264.846 Q2108.87 264.846 2110.82 264.43 Q2112.76 263.99 2114.31 263.087 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip870)" d="M2142.32 246.073 Q2141.6 245.657 2140.75 245.471 Q2139.91 245.263 2138.9 245.263 Q2135.28 245.263 2133.34 247.624 Q2131.42 249.962 2131.42 254.36 L2131.42 268.018 L2127.14 268.018 L2127.14 242.092 L2131.42 242.092 L2131.42 246.12 Q2132.76 243.758 2134.91 242.624 Q2137.07 241.467 2140.15 241.467 Q2140.59 241.467 2141.12 241.536 Q2141.65 241.583 2142.3 241.698 L2142.32 246.073 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip870)" d="M2158.57 254.985 Q2153.41 254.985 2151.42 256.166 Q2149.43 257.346 2149.43 260.194 Q2149.43 262.462 2150.91 263.805 Q2152.41 265.124 2154.98 265.124 Q2158.53 265.124 2160.65 262.624 Q2162.81 260.101 2162.81 255.934 L2162.81 254.985 L2158.57 254.985 M2167.07 253.226 L2167.07 268.018 L2162.81 268.018 L2162.81 264.082 Q2161.35 266.443 2159.17 267.578 Q2157 268.689 2153.85 268.689 Q2149.87 268.689 2147.51 266.467 Q2145.17 264.221 2145.17 260.471 Q2145.17 256.096 2148.09 253.874 Q2151.03 251.652 2156.84 251.652 L2162.81 251.652 L2162.81 251.235 Q2162.81 248.295 2160.86 246.698 Q2158.94 245.078 2155.45 245.078 Q2153.22 245.078 2151.12 245.61 Q2149.01 246.143 2147.07 247.207 L2147.07 243.272 Q2149.4 242.37 2151.6 241.93 Q2153.8 241.467 2155.89 241.467 Q2161.51 241.467 2164.29 244.383 Q2167.07 247.3 2167.07 253.226 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip870)" d="M2192.37 242.856 L2192.37 246.883 Q2190.56 245.957 2188.62 245.495 Q2186.67 245.032 2184.59 245.032 Q2181.42 245.032 2179.82 246.004 Q2178.25 246.976 2178.25 248.92 Q2178.25 250.402 2179.38 251.258 Q2180.52 252.092 2183.94 252.856 L2185.4 253.18 Q2189.94 254.152 2191.84 255.934 Q2193.76 257.694 2193.76 260.865 Q2193.76 264.476 2190.89 266.582 Q2188.04 268.689 2183.04 268.689 Q2180.96 268.689 2178.69 268.272 Q2176.44 267.879 2173.94 267.068 L2173.94 262.67 Q2176.3 263.897 2178.59 264.522 Q2180.89 265.124 2183.13 265.124 Q2186.14 265.124 2187.76 264.106 Q2189.38 263.064 2189.38 261.189 Q2189.38 259.453 2188.2 258.527 Q2187.04 257.601 2183.09 256.744 L2181.6 256.397 Q2177.65 255.564 2175.89 253.851 Q2174.13 252.115 2174.13 249.106 Q2174.13 245.448 2176.72 243.458 Q2179.31 241.467 2184.08 241.467 Q2186.44 241.467 2188.53 241.814 Q2190.61 242.161 2192.37 242.856 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /><path clip-path="url(#clip870)" d="M2217.07 242.856 L2217.07 246.883 Q2215.26 245.957 2213.32 245.495 Q2211.37 245.032 2209.29 245.032 Q2206.12 245.032 2204.52 246.004 Q2202.95 246.976 2202.95 248.92 Q2202.95 250.402 2204.08 251.258 Q2205.21 252.092 2208.64 252.856 L2210.1 253.18 Q2214.64 254.152 2216.53 255.934 Q2218.46 257.694 2218.46 260.865 Q2218.46 264.476 2215.59 266.582 Q2212.74 268.689 2207.74 268.689 Q2205.65 268.689 2203.39 268.272 Q2201.14 267.879 2198.64 267.068 L2198.64 262.67 Q2201 263.897 2203.29 264.522 Q2205.59 265.124 2207.83 265.124 Q2210.84 265.124 2212.46 264.106 Q2214.08 263.064 2214.08 261.189 Q2214.08 259.453 2212.9 258.527 Q2211.74 257.601 2207.78 256.744 L2206.3 256.397 Q2202.34 255.564 2200.59 253.851 Q2198.83 252.115 2198.83 249.106 Q2198.83 245.448 2201.42 243.458 Q2204.01 241.467 2208.78 241.467 Q2211.14 241.467 2213.22 241.814 Q2215.31 242.161 2217.07 242.856 Z" fill="#000000" fill-rule="evenodd" fill-opacity="1" /></svg>
<h2 id="Package:-Ecosystem.jl"><a class="docs-heading-anchor" href="#Package:-Ecosystem.jl">Package: <code>Ecosystem.jl</code></a><a id="Package:-Ecosystem.jl-1"></a><a class="docs-heading-anchor-permalink" href="#Package:-Ecosystem.jl" title="Permalink"></a></h2><p>In the main section of this lab you will create your own <code>Ecosystem.jl</code> package to organize <em>and test (!)</em> the code that we have written so far.</p><h3 id="PkgTemplates.jl"><a class="docs-heading-anchor" href="#PkgTemplates.jl"><code>PkgTemplates.jl</code></a><a id="PkgTemplates.jl-1"></a><a class="docs-heading-anchor-permalink" href="#PkgTemplates.jl" title="Permalink"></a></h3><div class="admonition is-category-exercise">
<header class="admonition-header">Exercise:</header>
<div class="admonition-body"><p>The simplest way to create a new package in Julia is to use <code>PkgTemplates.jl</code>. <code>]add PkgTemplates</code> to your global julia env and create a new package by running:</p><pre><code class="language-julia hljs">using PkgTemplates
Template(interactive=true)(&quot;Ecosystem&quot;)</code></pre><p>to interactively specify various options for your new package or use the following snippet to generate it programmatically:</p><pre><code class="language-julia hljs">using PkgTemplates

# define the package template
template = Template(;
    user = &quot;GithubUserName&quot;,            # github user name
    authors = [&quot;Author1&quot;, &quot;Author2&quot;],   # list of authors
    dir = &quot;/path/to/folder/&quot;,           # dir in which the package will be created
    julia = v&quot;1.8&quot;,                     # compat version of Julia
    plugins = [
        !CompatHelper,                  # disable CompatHelper
        !TagBot,                        # disable TagBot
        Readme(; inline_badges = true), # added readme file with badges
        Tests(; project = true),        # added Project.toml file for unit tests
        Git(; manifest = false),        # add manifest.toml to .gitignore
        License(; name = &quot;MIT&quot;)         # addedMIT licence
    ],
)

# execute the package template (this creates all files/folders)
template(&quot;Ecosystem&quot;)</code></pre></div></div>
<details class = "solution-body">
<summary class = "solution-header">Solution:</summary><p><p>This should have created a new folder <code>Ecosystem</code> which looks like below.</p><pre><code class="nohighlight hljs">.
‚îú‚îÄ‚îÄ LICENSE
‚îú‚îÄ‚îÄ Project.toml
‚îú‚îÄ‚îÄ README.md
‚îú‚îÄ‚îÄ src
‚îÇ   ‚îî‚îÄ‚îÄ Ecosystem.jl
‚îî‚îÄ‚îÄ test
    ‚îú‚îÄ‚îÄ Manifest.toml
    ‚îú‚îÄ‚îÄ Project.toml
    ‚îî‚îÄ‚îÄ runtests.jl</code></pre><p>If you <code>]activate /path/to/Ecosystem</code> you should be able to run <code>]test</code> to run the autogenerated test (which is not doing anything) and get the following output:</p><pre><code class="nohighlight hljs">(Ecosystem) pkg&gt; test
     Testing Ecosystem
      Status `/private/var/folders/6h/l9_skfms2v3dt8z3zfnd2jr00000gn/T/jl_zd5Uai/Project.toml`
  [e77cd98c] Ecosystem v0.1.0 `~/repos/Ecosystem`
  [8dfed614] Test `@stdlib/Test`
      Status `/private/var/folders/6h/l9_skfms2v3dt8z3zfnd2jr00000gn/T/jl_zd5Uai/Manifest.toml`
  [e77cd98c] Ecosystem v0.1.0 `~/repos/Ecosystem`
  [2a0f44e3] Base64 `@stdlib/Base64`
  [b77e0a4c] InteractiveUtils `@stdlib/InteractiveUtils`
  [56ddb016] Logging `@stdlib/Logging`
  [d6f4376e] Markdown `@stdlib/Markdown`
  [9a3f8284] Random `@stdlib/Random`
  [ea8e919c] SHA v0.7.0 `@stdlib/SHA`
  [9e88b42a] Serialization `@stdlib/Serialization`
  [8dfed614] Test `@stdlib/Test`
     Testing Running tests...
Test Summary: |Time
Ecosystem.jl  | None  0.0s
     Testing Ecosystem tests passed </code></pre></p></details><div class="admonition is-warning"><header class="admonition-header">Warning</header><div class="admonition-body"><p>From now on make sure that you <strong>always</strong> have the <code>Ecosystem</code> enviroment enabled. Otherwise you will not end up with the correct dependencies in your packages</p></div></div><h3 id="Adding-content-to-Ecosystem.jl"><a class="docs-heading-anchor" href="#Adding-content-to-Ecosystem.jl">Adding content to <code>Ecosystem.jl</code></a><a id="Adding-content-to-Ecosystem.jl-1"></a><a class="docs-heading-anchor-permalink" href="#Adding-content-to-Ecosystem.jl" title="Permalink"></a></h3><div class="admonition is-category-exercise">
<header class="admonition-header">Exercise:</header>
<div class="admonition-body"><p>Next, let&#39;s add the types and functions we have defined so far. You can use <code>include(&quot;path/to/file.jl&quot;)</code> in the main module file at <code>src/Ecosystem.jl</code> to bring some structure in your code. An exemplary file structure could look like below.</p><pre><code class="nohighlight hljs">.
‚îú‚îÄ‚îÄ LICENSE
‚îú‚îÄ‚îÄ Manifest.toml
‚îú‚îÄ‚îÄ Project.toml
‚îú‚îÄ‚îÄ README.md
‚îú‚îÄ‚îÄ src
‚îÇ   ‚îú‚îÄ‚îÄ Ecosystem.jl
‚îÇ   ‚îú‚îÄ‚îÄ animal.jl
‚îÇ   ‚îú‚îÄ‚îÄ plant.jl
‚îÇ   ‚îî‚îÄ‚îÄ world.jl
‚îî‚îÄ‚îÄ test
    ‚îî‚îÄ‚îÄ runtests.jl</code></pre><p>While you are adding functionality to your package you can make great use of <code>Revise.jl</code>.  Loading <code>Revise.jl</code> before your <code>Ecosystem.jl</code> will automatically recompile (and invalidate old methods!) while you develop.  You can install it in your global environment and and create a <code>$HOME/.config/startup.jl</code> which always loads <code>Revise</code>. It can look like this:</p><pre><code class="language-julia hljs"># try/catch block to make sure you can start julia if Revise should not be installed
try
    using Revise
catch e
    @warn(e.msg)
end</code></pre></div></div><div class="admonition is-warning"><header class="admonition-header">Warning</header><div class="admonition-body"><p>At some point along the way you should run into problems with the <code>sample</code> functions or when trying <code>using StatsBase</code>. This is normal, because you have not added the package to the <code>Ecosystem</code> environment yet. Adding it is as easy as <code>]add StatsBase</code>. Your <code>Ecosystem</code> environment should now look like this:</p><pre><code class="nohighlight hljs">(Ecosystem) pkg&gt; status
Project Ecosystem v0.1.0
Status `~/repos/Ecosystem/Project.toml`
  [2913bbd2] StatsBase v0.33.21</code></pre></div></div><div class="admonition is-category-exercise">
<header class="admonition-header">Exercise:</header>
<div class="admonition-body"><p>In order to use your new types/functions like below</p><pre><code class="language-julia hljs">using Ecosystem

Sheep(2)</code></pre><p>you have to <code>export</code> them from your module. Add exports for all important types and functions.</p></div></div>
<details class = "solution-body">
<summary class = "solution-header">Solution:</summary><p><pre><code class="language-julia hljs"># src/Ecosystem.jl
module Ecosystem

using StatsBase

export World
export Species, PlantSpecies, AnimalSpecies, Grass, Sheep, Wolf
export Agent, Plant, Animal
export agent_step!, eat!, eats, find_food, reproduce!, world_step!, agent_count

# ....

end</code></pre></p></details><h3 id="Unit-tests"><a class="docs-heading-anchor" href="#Unit-tests">Unit tests</a><a id="Unit-tests-1"></a><a class="docs-heading-anchor-permalink" href="#Unit-tests" title="Permalink"></a></h3><p>Every package should have tests which verify the correctness of your implementation, such that you can make changes to your codebase and remain confident that you did not break anything.</p><p>Julia&#39;s <code>Test</code> package provides you functionality to easily write <a href="https://docs.julialang.org/en/v1/stdlib/Test/">unit tests</a>.</p><div class="admonition is-category-exercise">
<header class="admonition-header">Exercise:</header>
<div class="admonition-body"><p>In the file <code>test/runtests.jl</code>, create a new <code>@testset</code> and write three <code>@test</code>s which check that the <code>show</code> methods we defined for <code>Grass</code>, <code>Sheep</code>, and <code>Wolf</code> work as expected.</p><p>The function <code>repr(x) == &quot;some string&quot;</code> to check if the string representation we defined in the <code>Base.show</code> overload returns what you expect.</p></div></div>
<details class = "solution-body">
<summary class = "solution-header">Solution:</summary><p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; # using Ecosystem
       using Test</code><code class="nohighlight hljs ansi" style="display:block;"></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; @testset &quot;Base.show&quot; begin
           g = Grass(1,1,1)
           s = Animal{Sheep}(2,1,1,1,1,male)
           w = Animal{Wolf}(3,1,1,1,1,female)
           @test repr(g) == &quot;üåø  #1 100% grown&quot;
           @test repr(s) == &quot;üêë‚ôÇ #2 E=1.0 ŒîE=1.0 pr=1.0 pf=1.0&quot;
           @test repr(w) == &quot;üê∫‚ôÄ #3 E=1.0 ŒîE=1.0 pr=1.0 pf=1.0&quot;
       end</code><code class="nohighlight hljs ansi" style="display:block;"><span class="sgr1">Test Summary: | <span class="sgr32">Pass  </span><span class="sgr36">Total  </span>Time</span>
Base.show     | <span class="sgr32">   3  </span><span class="sgr36">    3  </span>0.2s
Test.DefaultTestSet(&quot;Base.show&quot;, Any[], 3, false, false, true, 1.666107451212991e9, 1.666107451380923e9)</code></pre></p></details><h3 id="Github-CI"><a class="docs-heading-anchor" href="#Github-CI">Github CI</a><a id="Github-CI-1"></a><a class="docs-heading-anchor-permalink" href="#Github-CI" title="Permalink"></a></h3><div class="admonition is-category-exercise">
<header class="admonition-header">Exercise:</header>
<div class="admonition-body"><p>If you want you can upload you package to Github and add the <code>julia-runtest</code> <a href="https://github.com/julia-actions/julia-runtest">Github Action</a> to automatically test your code for every new push you make to the repository.</p></div></div></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../lecture/">¬´ Lecture</a><a class="docs-footer-nextpage" href="../hw/">Homework ¬ª</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.23 on <span class="colophon-date" title="Tuesday 18 October 2022 15:38">Tuesday 18 October 2022</span>. Using Julia version 1.8.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
