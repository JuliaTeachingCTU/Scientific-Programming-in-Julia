\documentclass{standalone}

\usepackage{tikz}

\usepackage{verbatim}
\usetikzlibrary{arrows,shapes}

\begin{document}
\input{style.tex}

\begin{tikzpicture}[scale=1.5]
    % draw the vertices
    \foreach \pos/\label/\name in {
      {(1,5)/z/$z$},
      {(1,0)/x/$x$},
      {(0,1)/y/$y$},
      {(1,2)/h1/$h_1 = \sin$},
      {(0,3)/h2/$h_2 = \cdot$},
      {(1,4)/h3/$h_3 = +$}} \node[forward] (\label) at \pos {\name};

    % \foreach \pos/\label/\name/ in {
    %   {(1,2)/h1/$h_1 = \sin$},
    %   {(0,3)/h2/$h_2 = \cdot$},
    %   {(1,4)/h3/$h_3 = +$}} \node[forward]  (\label) at \pos {\name};
    % \foreach \pos/\label/\name/\decor in {
    %   {(1,2)/h1/$\sin$/$h_1$},
    %   {(0,3)/h2/$\cdot$/$h_2$},
    %   {(1,4)/h3/$+$/$h_3$}} \node[forward,label=above:{\decor}]  (\label) at \pos {\name};

    \foreach \pos/\label/\name in {
      {(2.5,2)/dh3dh1/$\frac{\partial h_3}{\partial h_1}$},
      {(3.5,2)/dzdh1/$\frac{\partial z}{\partial h_1}$},
      {(4.5,1)/dh2dy/$\frac{\partial h_2}{\partial y}$},
      {(4.5,0)/dxdx/$\frac{\partial h_2}{\partial x}+\frac{\partial h_1}{\partial x}$},
      {(6,1)/dzdx/$\frac{\partial z}{\partial x}$},
      {(3.5,3)/dzdh2/$\frac{\partial z}{\partial h_2}$},
      {(2.5,3)/dh3dh2/$\frac{\partial h_3}{\partial h_2}$},
      {(2.5,4)/dzdh3/$\frac{\partial z}{\partial h_3}$}} \node[reverse] (\label) at \pos {\name};

    % and the edges
    \foreach \source/\dest in {
      %{h3/dh3dh1},
      %{h3/dh3dh2},
      {dzdh2/dzdx},
      {y/dh2dy},
      {x/dxdx},
      {dxdx/dzdx},
      {dh2dy/dzdx},
      {dh3dh1/dzdh1},
      {dzdh3/dzdh1},
      {h1/dh3dh1},
      {h2/dh3dh2},
      {dzdh3/dzdh2},
      {dh3dh2/dzdh2},
      {h3/dzdh3},
      {h1/h3},
      {h2/h3},
      {x/h1},
      {y/h2},
      {h3/z},
      {x/h2}} \path[edge] (\source) -- (\dest);

\end{tikzpicture}

\end{document}

